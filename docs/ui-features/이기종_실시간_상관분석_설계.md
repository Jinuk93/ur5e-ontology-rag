# ì´ê¸°ì¢… ì‹¤ì‹œê°„ ìƒê´€ë¶„ì„ ì‹œìŠ¤í…œ ì„¤ê³„

> UR5e ë¡œë´‡ + Axia80 í˜ì„¼ì„œ ë°ì´í„°ë¥¼ ê²°í•©í•˜ì—¬ ì‹¤ì‹œê°„ ìœ„í—˜ ê°ì§€ ë° ì˜ˆì¸¡

---

## 1. í˜„ì¬ ìƒíƒœ ë° ë¬¸ì œì 

### 1.1 í˜„ì¬ ë°ì´í„° í˜„í™©

| ì¥ë¹„ | í˜„ì¬ ë°ì´í„° | ë¬¸ì œì  |
|-----|-----------|-------|
| **Axia80** | Fx, Fy, Fz (í˜ ì„¼ì„œ) | ì‹œë®¬ë ˆì´ì…˜ ë°ì´í„°, ì‹¤ì‹œê°„ ìˆ˜ì¹˜ ìˆìŒ âœ… |
| **UR5e** | ì—ëŸ¬ì½”ë“œë§Œ | ì‹¤ì‹œê°„ ìˆ˜ì¹˜ ì—†ìŒ, ì‚¬í›„ ì´ë²¤íŠ¸ë§Œ âŒ |

### 1.2 ì™œ ë¬¸ì œì¸ê°€?

```
í˜„ì¬:
  Axia80 (í˜) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ ë‹¨ë… ëª¨ë‹ˆí„°ë§ë§Œ ê°€ëŠ¥
  UR5e (ì—ëŸ¬ì½”ë“œ) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ ì‚¬í›„ ë³´ê³ ë§Œ ê°€ëŠ¥

  â†’ "ì™œ í˜ì´ ì»¤ì¡ŒëŠ”ì§€" ì•Œ ìˆ˜ ì—†ìŒ
  â†’ ì˜ˆì¸¡/ì˜ˆë°© ë³´ì „ ë¶ˆê°€ëŠ¥
```

**í•„ìš”í•œ ê²ƒ:**
```
ëª©í‘œ:
  Axia80 (í˜) â—€â”€â”€â”€â”€â”€â”€ìƒê´€ê´€ê³„â”€â”€â”€â”€â”€â”€â–¶ UR5e (ì†ë„/í† í¬/ì „ë¥˜)

  â†’ "ê³ ì† ì´ë™ ì¤‘ ì ‘ì´‰ â†’ í˜ ìŠ¤íŒŒì´í¬" ê´€ê³„ íŒŒì•…
  â†’ íŒ¨í„´ ê¸°ë°˜ ì˜ˆì¸¡ ê°€ëŠ¥
  â†’ ì˜ˆë°© ë³´ì „ ê°€ëŠ¥
```

---

## 2. í•´ê²° ë°©ì•ˆ: 3ì¸µ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Layer 3: í”„ë ˆì  í…Œì´ì…˜                                           â”‚
â”‚  â”œâ”€ Live íƒ­: ì´ê¸°ì¢… ìƒê´€ë¶„ì„ í…Œì´ë¸”                               â”‚
â”‚  â”œâ”€ ìœ„í—˜ë„/ì˜ˆì¸¡ ì‹œê°í™”                                           â”‚
â”‚  â””â”€ ì˜¨í†¨ë¡œì§€ ê·¸ë˜í”„ ì—°ê²° (ìš”ì•½ëœ ì´ë²¤íŠ¸ë§Œ)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Layer 2: ë¶„ì„/íŒŒìƒ ì—”ì§„                                         â”‚
â”‚  â”œâ”€ ìƒê´€ê´€ê³„ ê³„ì‚° (correlation_engine.py)                        â”‚
â”‚  â”œâ”€ ìœ„í—˜ë„ ì ìˆ˜ ì‚°ì¶œ (contact_risk_score)                        â”‚
â”‚  â”œâ”€ ì¶©ëŒ ìœ„í—˜ ì ìˆ˜ (collision_risk_score)                        â”‚
â”‚  â””â”€ ê¶Œì¥ ì¡°ì¹˜ ê²°ì • (recommended_action)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Layer 1: ë°ì´í„° ìˆ˜ì§‘/ìƒì„±                                       â”‚
â”‚  â”œâ”€ Scenario Sequencer: ì‹œë‚˜ë¦¬ì˜¤ ìƒíƒœ ë¨¸ì‹  (5~20ì´ˆ êµ¬ê°„ ìœ ì§€)     â”‚
â”‚  â”œâ”€ Axia80: ì‹œë‚˜ë¦¬ì˜¤ ê¸°ë°˜ ìƒì„± + ê°œë³„ ë…¸ì´ì¦ˆ + ì§€ì—°               â”‚
â”‚  â””â”€ UR5e: ì‹œë‚˜ë¦¬ì˜¤ ê¸°ë°˜ ìƒì„± + ê°œë³„ ë…¸ì´ì¦ˆ                        â”‚
â”‚           â€» ì—­ì‚° ë°©ì‹ X â†’ ì‹œë‚˜ë¦¬ì˜¤ê°€ ì›ì¸, ì–‘ìª½ì´ ê°ê° ê´€ì¸¡       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. ì‹œê°„/ìƒ˜í”Œë§ ì •ì˜ â­ (ì‹ ê·œ)

### 3.1 ê¸°ë³¸ íŒŒë¼ë¯¸í„°

| íŒŒë¼ë¯¸í„° | ê°’ | ì„¤ëª… |
|---------|---|------|
| `sampling_rate` | 1 Hz | ë°ì´í„° ìƒì„±/ì „ì†¡ ì£¼ê¸° |
| `window_size` | 3ì´ˆ | ë¶„ì„ ìœˆë„ìš° í¬ê¸° |
| `buffer_size` | 60ê°œ | í”„ë¡ íŠ¸ì—”ë“œ ë²„í¼ (ìµœê·¼ 60ì´ˆ) |
| `timestamp_format` | ISO8601 | `2024-01-24T10:01:02.000Z` |

### 3.2 ì‹œë‚˜ë¦¬ì˜¤ êµ¬ê°„ ì •ì˜

| íŒŒë¼ë¯¸í„° | ê°’ | ì„¤ëª… |
|---------|---|------|
| `scenario_min_duration` | 5ì´ˆ | ì‹œë‚˜ë¦¬ì˜¤ ìµœì†Œ ìœ ì§€ ì‹œê°„ |
| `scenario_max_duration` | 20ì´ˆ | ì‹œë‚˜ë¦¬ì˜¤ ìµœëŒ€ ìœ ì§€ ì‹œê°„ |
| `transition_smoothing` | 2ì´ˆ | ì‹œë‚˜ë¦¬ì˜¤ ì „í™˜ ì‹œ ë³´ê°„ êµ¬ê°„ |

### 3.3 ë…¸ì´ì¦ˆ/ì§€ì—° íŒŒë¼ë¯¸í„°

| íŒŒë¼ë¯¸í„° | Axia80 | UR5e | ì„¤ëª… |
|---------|--------|------|------|
| `noise_std` | Â±5% | Â±3% | ê¸°ë³¸ê°’ ëŒ€ë¹„ ë…¸ì´ì¦ˆ |
| `response_delay` | 100~200ms | 0ms | ë°˜ì‘ ì§€ì—° (í˜ì€ ë¡œë´‡ ë™ì‘ í›„ ì§€ì—°) |

---

## 4. ë°ì´í„° ì„¤ê³„

### 4.1 UR5e í•©ì„± í…”ë ˆë©”íŠ¸ë¦¬ (ìƒˆë¡œ ìƒì„±)

| í•„ë“œëª… | íƒ€ì… | ë‹¨ìœ„ | ë²”ìœ„ | ì„¤ëª… |
|-------|------|-----|------|-----|
| `timestamp` | string | ISO8601 | - | Axia80ê³¼ ë™ì¼ ì‹œê°„ |
| `tcp_speed` | float | m/s | 0 ~ 1.0 | íˆ´ ëë‹¨ ì´ë™ ì†ë„ |
| `tcp_acceleration` | float | m/sÂ² | -5 ~ 5 | ê°€ì†ë„ |
| `joint_torque_sum` | float | Nm | 0 ~ 150 | 6ê°œ ê´€ì ˆ í† í¬ í•©ê³„ |
| `joint_current_avg` | float | A | 0.5 ~ 5.0 | í‰ê·  ëª¨í„° ì „ë¥˜ |
| `safety_mode` | enum | - | normal/reduced/protective_stop | ì•ˆì „ ëª¨ë“œ |
| `program_state` | enum | - | running/paused/stopped | í”„ë¡œê·¸ë¨ ìƒíƒœ |
| `protective_stop` | bool | - | true/false | ë³´í˜¸ì •ì§€ ë°œìƒ ì—¬ë¶€ |

### 4.2 íŒŒìƒ/ê´€ê³„ ì§€í‘œ (ê³„ì‚°ìœ¼ë¡œ ìƒì„±)

| í•„ë“œëª… | íƒ€ì… | ë²”ìœ„ | ê³„ì‚° ë°©ì‹ |
|-------|------|-----|----------|
| `force_magnitude` | float | 0~500 N | âˆš(FxÂ² + FyÂ² + FzÂ²) |
| `force_rate` | float | N/s | d\|F\|/dt (ë³€í™”ìœ¨) |
| `force_spike` | bool | - | \|F\| > 100N |
| `high_speed` | bool | - | tcp_speed > 0.5 m/s |
| `torque_force_ratio` | float | - | joint_torque_sum / max(\|F\|, 1.0) |
| `contact_risk_score` | float | 0~1 | ë³µí•© ìœ„í—˜ë„ ì ìˆ˜ |
| `collision_risk_score` | float | 0~1 | ì¶©ëŒ ìœ„í—˜ ì ìˆ˜ (í™•ë¥  ì•„ë‹˜) |
| `anomaly_detected` | bool | - | í† í¬â†‘ but í˜â†’ (ë§ˆëª¨ ì§•í›„) |
| `recommended_action` | enum | - | maintain/slow_down/stop/inspect |

> âš ï¸ **ì£¼ì˜**: `collision_risk_score`ëŠ” "í™•ë¥ "ì´ ì•„ë‹Œ "ìœ„í—˜ë„ ì ìˆ˜"ì…ë‹ˆë‹¤. UIì—ì„œë„ "Risk"ë¡œë§Œ í‘œì‹œ.

### 4.3 í†µí•© ë°ì´í„° êµ¬ì¡° (API ì‘ë‹µ)

```json
{
  "timestamp": "2024-01-24T10:01:02.000Z",
  "scenario": {
    "current": "normal",
    "elapsed_sec": 8,
    "remaining_sec": 7
  },
  "window": {
    "start": "2024-01-24T10:01:00.000Z",
    "end": "2024-01-24T10:01:02.000Z",
    "duration_sec": 2
  },
  "axia80": {
    "Fx": 5.2,
    "Fy": -3.1,
    "Fz": -45.8,
    "force_magnitude": 46.2,
    "force_rate": 12.5,
    "force_spike": false,
    "peak_axis": "Fz"
  },
  "ur5e": {
    "tcp_speed": 0.25,
    "tcp_acceleration": 0.8,
    "joint_torque_sum": 42.5,
    "joint_current_avg": 2.1,
    "safety_mode": "normal",
    "program_state": "running",
    "protective_stop": false
  },
  "correlation": {
    "torque_force_ratio": 0.92,
    "speed_force_correlation": 0.78,
    "anomaly_detected": false
  },
  "risk": {
    "contact_risk_score": 0.23,
    "collision_risk_score": 0.15,
    "risk_level": "low",
    "recommended_action": "maintain",
    "prediction_horizon_sec": 3
  }
}
```

---

## 5. ë°ì´í„° ìƒì„± ì•„í‚¤í…ì²˜ â­ (ìˆ˜ì •ë¨)

### 5.1 í•µì‹¬ ì›ì¹™: ì‹œë‚˜ë¦¬ì˜¤ ê¸°ë°˜ ìƒì„±

**ê¸°ì¡´ (ë¬¸ì œ ìˆìŒ):**
```
Axia80 Fz â†’ ì—­ì‚° â†’ UR5e speed/torque
ë¬¸ì œ: ìƒê´€ê´€ê³„ê°€ 0.95+ (ë„ˆë¬´ ì™„ë²½í•´ì„œ ê°€ì§œì²˜ëŸ¼ ë³´ì„)
```

**ìˆ˜ì • (ìì—°ìŠ¤ëŸ¬ì›€):**
```
[Scenario Sequencer] â”€â”€â”¬â”€â”€â–¶ Axia80 ìƒì„±ê¸° â”€â”€(+ë…¸ì´ì¦ˆ +100~200ms ì§€ì—°)â”€â”€â–¶ Axia80 ë°ì´í„°
                       â”‚
                       â””â”€â”€â–¶ UR5e ìƒì„±ê¸° â”€â”€(+ë…¸ì´ì¦ˆ)â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ UR5e ë°ì´í„°

ê²°ê³¼: ìƒê´€ê´€ê³„ 0.7~0.85 (ìì—°ìŠ¤ëŸ¬ì›€)
```

### 5.2 Scenario Sequencer (ìƒíƒœ ë¨¸ì‹ )

```python
class ScenarioSequencer:
    """ì‹œë‚˜ë¦¬ì˜¤ë¥¼ êµ¬ê°„ ë‹¨ìœ„ë¡œ ê´€ë¦¬í•˜ëŠ” ìƒíƒœ ë¨¸ì‹ """

    SCENARIOS = {
        "normal": {"weight": 0.70, "duration": (10, 20)},      # 10~20ì´ˆ ìœ ì§€
        "collision": {"weight": 0.10, "duration": (5, 10)},    # 5~10ì´ˆ (ì¶©ëŒ ì‹œí€€ìŠ¤)
        "overload": {"weight": 0.10, "duration": (8, 15)},     # 8~15ì´ˆ ìœ ì§€
        "wear": {"weight": 0.05, "duration": (10, 20)},        # 10~20ì´ˆ ìœ ì§€
        "risk_approach": {"weight": 0.05, "duration": (5, 12)} # 5~12ì´ˆ (ì ì§„ì  ìƒìŠ¹)
    }

    def __init__(self):
        self.current_scenario = "normal"
        self.scenario_start_time = time.time()
        self.scenario_duration = random.randint(10, 20)
        self.transition_progress = 0.0  # 0~1 (ë³´ê°„ìš©)

    def tick(self) -> str:
        """ë§¤ í‹±ë§ˆë‹¤ í˜¸ì¶œ: í˜„ì¬ ì‹œë‚˜ë¦¬ì˜¤ ë°˜í™˜ + í•„ìš”ì‹œ ì „í™˜"""
        elapsed = time.time() - self.scenario_start_time

        if elapsed >= self.scenario_duration:
            self._transition_to_next()

        return self.current_scenario

    def _transition_to_next(self):
        """ê°€ì¤‘ì¹˜ ê¸°ë°˜ ë‹¤ìŒ ì‹œë‚˜ë¦¬ì˜¤ ì„ íƒ"""
        weights = [s["weight"] for s in self.SCENARIOS.values()]
        next_scenario = random.choices(list(self.SCENARIOS.keys()), weights=weights)[0]

        self.current_scenario = next_scenario
        self.scenario_start_time = time.time()
        duration_range = self.SCENARIOS[next_scenario]["duration"]
        self.scenario_duration = random.randint(*duration_range)
```

### 5.3 ì‹œë‚˜ë¦¬ì˜¤ë³„ ë°ì´í„° ìƒì„± ê·œì¹™

#### ì‹œë‚˜ë¦¬ì˜¤ 1: ì •ìƒ ì‘ì—… (normal) - 70%
```python
# ê¸°ë³¸ê°’ (ì‹œë‚˜ë¦¬ì˜¤ ì¤‘ì‹¬ê°’)
base = {
    "tcp_speed": 0.2,
    "force_magnitude": 20,
    "joint_torque_sum": 30,
}

# Axia80: ê¸°ë³¸ê°’ + ë…¸ì´ì¦ˆ + ì§€ì—°
axia80_force = base["force_magnitude"] * (1 + random.gauss(0, 0.05))  # Â±5% ë…¸ì´ì¦ˆ
# 100~200ms ì§€ì—° ì ìš© (ì´ì „ UR5e ë™ì‘ì˜ ê²°ê³¼)

# UR5e: ê¸°ë³¸ê°’ + ë…¸ì´ì¦ˆ (ì§€ì—° ì—†ìŒ)
ur5e_speed = base["tcp_speed"] * (1 + random.gauss(0, 0.03))  # Â±3% ë…¸ì´ì¦ˆ
ur5e_torque = base["joint_torque_sum"] * (1 + random.gauss(0, 0.03))

# ê²°ê³¼
contact_risk_score = 0.1 ~ 0.2
```

#### ì‹œë‚˜ë¦¬ì˜¤ 2: ì¶©ëŒ/ì ‘ì´‰ (collision) - 10%
```python
# ì‹œê°„ì— ë”°ë¥¸ ì‹œí€€ìŠ¤ (5~10ì´ˆ ë™ì•ˆ)
phase = elapsed_in_scenario / scenario_duration

if phase < 0.3:  # ì ‘ê·¼ ë‹¨ê³„
    tcp_speed = 0.5 + 0.1 * phase
    force_magnitude = 30 + 20 * phase
elif phase < 0.5:  # ì ‘ì´‰ ìˆœê°„
    tcp_speed = 0.6 â†’ 0.2 (ê¸‰ê°)
    force_magnitude = 50 â†’ 150 (ìŠ¤íŒŒì´í¬)
elif phase < 0.7:  # ë°˜ì‘ ë‹¨ê³„
    tcp_speed = 0.1
    force_magnitude = 150 â†’ 80
    protective_stop = True (ê°€ëŠ¥ì„±)
else:  # ë³µêµ¬ ë‹¨ê³„
    tcp_speed = 0.0 â†’ 0.1
    force_magnitude = 80 â†’ 40

# ë…¸ì´ì¦ˆ ì¶”ê°€
axia80_force += random.gauss(0, force_magnitude * 0.05)
ur5e_speed += random.gauss(0, tcp_speed * 0.03)
```

#### ì‹œë‚˜ë¦¬ì˜¤ 3: ê³¼ë¶€í•˜ (overload) - 10%
```python
base = {
    "tcp_speed": 0.2,           # ì •ìƒ ì†ë„
    "force_magnitude": 65,      # ë†’ì§€ë§Œ ìŠ¤íŒŒì´í¬ ì•„ë‹˜
    "joint_torque_sum": 75,     # ë†’ì€ í† í¬
    "joint_current_avg": 4.0,   # ë†’ì€ ì „ë¥˜
}
# + ê°œë³„ ë…¸ì´ì¦ˆ

contact_risk_score = 0.4 ~ 0.6
recommended_action = "reduce_payload"
```

#### ì‹œë‚˜ë¦¬ì˜¤ 4: ë§ˆëª¨ ì§•í›„ (wear) - 5%
```python
base = {
    "tcp_speed": 0.2,           # ì •ìƒ ì†ë„
    "force_magnitude": 20,      # ì •ìƒ í˜
    "joint_torque_sum": 60,     # ë¹„ì •ìƒ ë†’ì€ í† í¬! (í•µì‹¬)
}
# torque_force_ratio = 60 / 20 = 3.0 (ì •ìƒì€ 1.5 ì´í•˜)

anomaly_detected = True
recommended_action = "inspect_joints"
```

#### ì‹œë‚˜ë¦¬ì˜¤ 5: ìœ„í—˜ ì ‘ê·¼ (risk_approach) - 5%
```python
# ì‹œê°„ì— ë”°ë¼ ì ì§„ì  ìƒìŠ¹
progress = elapsed_in_scenario / scenario_duration

tcp_speed = 0.3 + 0.2 * progress      # 0.3 â†’ 0.5
force_magnitude = 25 + 30 * progress  # 25 â†’ 55
collision_risk_score = 0.2 + 0.5 * progress  # 0.2 â†’ 0.7

# ì¤‘ê°„ì— slow_down ê¶Œê³  ë°œìƒ
if collision_risk_score > 0.5:
    recommended_action = "slow_down"
```

---

## 6. ìƒíƒœ ì „ì´ ê·œì¹™ â­ (ì‹ ê·œ)

### 6.1 safety_modeì™€ ë‹¤ë¥¸ í•„ë“œì˜ ì¼ê´€ì„±

```python
# protective_stopì´ Trueë©´ ë°˜ë“œì‹œ:
if protective_stop:
    safety_mode = "protective_stop"
    program_state = "paused"  # ë˜ëŠ” "stopped"
    tcp_speed = 0.0

# safety_modeë³„ ì œì•½
if safety_mode == "normal":
    tcp_speed: 0 ~ 1.0 í—ˆìš©

if safety_mode == "reduced":
    tcp_speed: max 0.25 ì œí•œ

if safety_mode == "protective_stop":
    tcp_speed = 0.0 ê°•ì œ
    program_state in ["paused", "stopped"]
```

### 6.2 protective_stop ë˜ì¹­ ë° ë³µêµ¬

```python
class ProtectiveStopState:
    """ë³´í˜¸ì •ì§€ ìƒíƒœ ê´€ë¦¬"""

    def __init__(self):
        self.is_active = False
        self.activated_at = None
        self.recovery_delay = 3.0  # ìµœì†Œ 3ì´ˆ ìœ ì§€

    def trigger(self):
        """ë³´í˜¸ì •ì§€ ë°œë™"""
        self.is_active = True
        self.activated_at = time.time()

    def can_recover(self, current_risk: float) -> bool:
        """ë³µêµ¬ ê°€ëŠ¥ ì—¬ë¶€ íŒë‹¨"""
        if not self.is_active:
            return False

        elapsed = time.time() - self.activated_at

        # ì¡°ê±´: ìµœì†Œ 3ì´ˆ ê²½ê³¼ + ìœ„í—˜ë„ 0.3 ì´í•˜
        return elapsed >= self.recovery_delay and current_risk < 0.3

    def recover(self):
        """ë³´í˜¸ì •ì§€ í•´ì œ"""
        self.is_active = False
        self.activated_at = None
```

### 6.3 ì‹œë‚˜ë¦¬ì˜¤ ì „í™˜ ì‹œ ë³´ê°„ (Smoothing)

```python
def interpolate_transition(old_values: dict, new_values: dict, progress: float) -> dict:
    """ì‹œë‚˜ë¦¬ì˜¤ ì „í™˜ ì‹œ ê¸‰ê²©í•œ ë³€í™” ë°©ì§€"""

    # progress: 0.0 (ì „í™˜ ì‹œì‘) â†’ 1.0 (ì „í™˜ ì™„ë£Œ)
    # 2ì´ˆ ë™ì•ˆ ë³´ê°„

    result = {}
    for key in old_values:
        if isinstance(old_values[key], (int, float)):
            result[key] = old_values[key] + (new_values[key] - old_values[key]) * progress
        else:
            # enum/boolì€ ì¤‘ê°„ê°’ì—ì„œ ì „í™˜
            result[key] = new_values[key] if progress > 0.5 else old_values[key]

    return result
```

---

## 7. ì˜ˆì¸¡ ë¡œì§

### 7.1 ìœ„í—˜ë„ ì ìˆ˜ ê³„ì‚° (contact_risk_score)

```python
def calculate_contact_risk_score(data: dict) -> float:
    """0~1 ì‚¬ì´ì˜ ì ‘ì´‰ ìœ„í—˜ë„ ì ìˆ˜ ê³„ì‚°"""

    score = 0.0

    # 1. í˜ í¬ê¸° ê¸°ì—¬ (40%)
    force_norm = min(data['force_magnitude'] / 150, 1.0)
    score += 0.4 * force_norm

    # 2. ì†ë„ ê¸°ì—¬ (30%)
    speed_norm = min(data['tcp_speed'] / 0.8, 1.0)
    score += 0.3 * speed_norm

    # 3. í˜ ë³€í™”ìœ¨ ê¸°ì—¬ (20%)
    rate_norm = min(abs(data['force_rate']) / 50, 1.0)
    score += 0.2 * rate_norm

    # 4. í† í¬-í˜ ë¶ˆì¼ì¹˜ ê¸°ì—¬ (10%)
    if data['torque_force_ratio'] > 2.0:
        score += 0.1

    return min(score, 1.0)
```

### 7.2 ì¶©ëŒ ìœ„í—˜ ì ìˆ˜ (collision_risk_score) - ì´ë¦„ ë³€ê²½

```python
def calculate_collision_risk_score(history: list[dict], horizon_sec: int = 3) -> float:
    """
    ìµœê·¼ ë°ì´í„° ê¸°ë°˜ ì¶©ëŒ ìœ„í—˜ ì ìˆ˜ ê³„ì‚°

    âš ï¸ ì£¼ì˜: ì´ê²ƒì€ "í™•ë¥ "ì´ ì•„ë‹Œ "ìœ„í—˜ë„ ì ìˆ˜"ì…ë‹ˆë‹¤.
    UIì—ì„œëŠ” "Risk Score" ë˜ëŠ” "ìœ„í—˜ë„"ë¡œ í‘œì‹œí•˜ì„¸ìš”.
    """

    if len(history) < 3:
        return 0.0

    # 1. í˜ ì¦ê°€ ì¶”ì„¸ ë¶„ì„
    forces = [h['force_magnitude'] for h in history[-5:]]
    force_trend = calculate_linear_trend(forces)

    # 2. ì†ë„ ìœ ì§€/ì¦ê°€ ì—¬ë¶€
    speeds = [h['tcp_speed'] for h in history[-5:]]
    speed_trend = calculate_linear_trend(speeds)

    # 3. í˜„ì¬ ìœ„í—˜ë„
    current_risk = history[-1]['contact_risk_score']

    # ë³µí•© ì ìˆ˜ ê³„ì‚° (í™•ë¥  ì•„ë‹˜!)
    score = (
        0.3 * min(force_trend / 20, 1.0) +
        0.2 * min(speed_trend / 0.1, 1.0) +
        0.3 * current_risk +
        0.2 * (1 if forces[-1] > 50 else 0)
    )

    return min(max(score, 0.0), 1.0)
```

### 7.3 ê¶Œì¥ ì¡°ì¹˜ ê²°ì •

```python
def determine_recommended_action(
    contact_risk: float,
    collision_risk: float,
    anomaly: bool
) -> str:
    """ìœ„í—˜ë„ì— ë”°ë¥¸ ê¶Œì¥ ì¡°ì¹˜"""

    if anomaly:
        return "inspect_joints"  # ë§ˆëª¨ ì§•í›„ â†’ ì ê²€ ê¶Œê³ 

    if contact_risk >= 0.8 or collision_risk >= 0.8:
        return "emergency_stop"  # ì¦‰ì‹œ ì •ì§€

    if contact_risk >= 0.5 or collision_risk >= 0.5:
        return "slow_down"  # ê°ì† ê¶Œê³ 

    if contact_risk >= 0.3 or collision_risk >= 0.3:
        return "caution"  # ì£¼ì˜

    return "maintain"  # í˜„ìƒ ìœ ì§€
```

---

## 8. API ì„¤ê³„

### 8.1 ìƒˆë¡œìš´ ì—”ë“œí¬ì¸íŠ¸

```
GET /api/sensors/correlation/stream
```

**SSE ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ì´ê¸°ì¢… ìƒê´€ ë°ì´í„° ì‹¤ì‹œê°„ ì „ì†¡**

Query Parameters:
- `interval`: ì „ì†¡ ê°„ê²© (ì´ˆ, ê¸°ë³¸ê°’: 1.0)
- `window_size`: ë¶„ì„ ìœˆë„ìš° í¬ê¸° (ì´ˆ, ê¸°ë³¸ê°’: 3)

Response (SSE):
```
data: {"timestamp": "...", "scenario": {...}, "axia80": {...}, "ur5e": {...}, "correlation": {...}, "risk": {...}}
```

### 8.2 ê¸°ì¡´ ì—”ë“œí¬ì¸íŠ¸ í™•ì¥

```
GET /api/sensors/stream
```

ê¸°ì¡´ Axia80 ë°ì´í„°ì— UR5e ë°ì´í„° ì¶”ê°€:
```json
{
  "timestamp": "...",
  "Fx": 5.2, "Fy": -3.1, "Fz": -45.8,
  "ur5e": {
    "tcp_speed": 0.25,
    "joint_torque_sum": 42.5,
    "safety_mode": "normal"
  }
}
```

---

## 9. í”„ë¡ íŠ¸ì—”ë“œ ì„¤ê³„

### 9.1 Live íƒ­ UI êµ¬ì„±

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [RiskAlertBar] - í˜„ì¬ ìœ„í—˜ ìƒíƒœ ë°°ë„ˆ                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [Entity Cards] - UR5e, Axia80, Fx, Fy, Fz + [ì´ë²¤íŠ¸ ê°ì§€] â­    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚UR5eë¡œë´‡â”‚   Axia80 ì„¼ì„œ   â”‚Fzìˆ˜ì§ë ¥â”‚Fxì „í›„ë ¥â”‚Fyì¢Œìš°ë ¥â”‚ ì´ë²¤íŠ¸ ê°ì§€    â”‚â”‚
â”‚  â”‚ ì •ìƒ   â”‚Fz,Fx,Fy+ì´ë²¤íŠ¸ â”‚-12.1 N â”‚ -2.2 N â”‚ -4 N   â”‚ë¯¸í•´ê²° 2/í•´ê²° 1 â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [RealtimeChart] - UR5e + Axia80 ì„¼ì„œ í†µí•© ëª¨ë‹ˆí„°ë§ â­ (ê°œì„ )    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Axia80: [âœ“Fz] [âœ“Fx] [âœ“Fy] â”‚ UR5e: [âœ“TCPì†ë„] [âœ“í† í¬] [âœ“ì „ë¥˜]â”‚
â”‚  â”‚ (ê° ì¶•ë³„ ìƒ‰ìƒ êµ¬ë¶„, ì²´í¬ë°•ìŠ¤ë¡œ ON/OFF)                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [CorrelationTable] - ì‹¤ì‹œê°„ ì˜ˆì§€ë³´ì „ í…Œì´ë¸” (ì‹ ê·œ) â­           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ì‹œê°„ â”‚Axia |Fâ”‚â”‚UR5e ì†ë„â”‚ í† í¬ â”‚ìƒê´€  â”‚ìœ„í—˜ë„â”‚ ê¶Œì¥ â”‚         â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤         â”‚
â”‚  â”‚10:01â”‚ 25.3 N â”‚0.21 m/sâ”‚ 35Nm â”‚ 0.82 â”‚ğŸŸ¢0.15â”‚ ìœ ì§€ â”‚         â”‚
â”‚  â”‚10:02â”‚ 85.6 N â”‚0.12 m/sâ”‚ 78Nm â”‚ 0.91 â”‚ğŸ”´0.82â”‚ ê°ì† â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                 â”‚
â”‚  [ìœ„í—˜ ê°ì§€ ê¸°ë¡] - ì´ìƒ ê°ì§€ ì‹œ row ì¶”ê°€ (ìµœëŒ€ 20ê°œ, ìŠ¤í¬ë¡¤)   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [EventList] - ìµœê·¼ ì´ë²¤íŠ¸ (ê°œì„ ) â­                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ì‹œê°„ â”‚ìƒíƒœ â”‚ì´ë²¤íŠ¸â”‚ì—ëŸ¬  â”‚ì¡°ì¹˜ â”‚AIì˜ˆì¸¡ â”‚í•´ê²°ì™„ë£Œâ”‚            â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚
â”‚  â”‚01.20â”‚âš ê²½ê³ â”‚ ì¶©ëŒ â”‚ C153 â”‚Stop â”‚ì‘ì—…ê²€í† â”‚  â˜‘    â”‚            â”‚
â”‚  â”‚01.19â”‚âš ìœ„í—˜â”‚ê³¼ë¶€í•˜â”‚ C189 â”‚Stop â”‚ë¶€í•˜í™•ì¸â”‚  â˜    â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [StatisticsSummary] - í†µê³„ ìš”ì•½                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 9.2 CorrelationTable ì»´í¬ë„ŒíŠ¸ ìŠ¤í™

```typescript
interface CorrelationRow {
  timestamp: string;
  scenario: {
    current: 'normal' | 'collision' | 'overload' | 'wear' | 'risk_approach';
    elapsedSec: number;
  };
  axia80: {
    forceMagnitude: number;
    forceRate: number;
    forceSpike: boolean;
    peakAxis: 'Fx' | 'Fy' | 'Fz';
  };
  ur5e: {
    tcpSpeed: number;
    jointTorqueSum: number;
    jointCurrentAvg: number;
    safetyMode: 'normal' | 'reduced' | 'protective_stop';
    protectiveStop: boolean;
  };
  correlation: {
    torqueForceRatio: number;
    speedForceCorrelation: number;
    anomalyDetected: boolean;
  };
  risk: {
    contactRiskScore: number;
    collisionRiskScore: number;  // ì´ë¦„ ë³€ê²½ (probability â†’ risk_score)
    riskLevel: 'low' | 'medium' | 'high' | 'critical';
    recommendedAction: string;
  };
}
```

---

## 10. ì˜¨í†¨ë¡œì§€ ì—°ê²°

### 10.1 ì›ì¹™: ìˆ˜ì¹˜ X, ìš”ì•½ëœ ì‚¬ì‹¤ë§Œ

ì˜¨í†¨ë¡œì§€ ê·¸ë˜í”„ì— time-series ìˆ˜ì¹˜ë¥¼ ì§ì ‘ ë„£ìœ¼ë©´ ê·¸ë˜í”„ê°€ í­ë°œí•¨.
ëŒ€ì‹  **ì´ë²¤íŠ¸/ìƒíƒœ ìš”ì•½**ë§Œ ë…¸ë“œ/ì—£ì§€ë¡œ ì¶”ê°€.

### 10.2 ì¶”ê°€í•  ë…¸ë“œ íƒ€ì…

```
- TelemetryWindow: íŠ¹ì • ì‹œê°„ êµ¬ê°„ì˜ ë¶„ì„ ê²°ê³¼
- ForceSpike: í˜ ìŠ¤íŒŒì´í¬ ì´ë²¤íŠ¸
- HighSpeed: ê³ ì† ì´ë™ ìƒíƒœ
- CollisionRisk: ì¶©ëŒ ìœ„í—˜ ê°ì§€
- WearAnomaly: ë§ˆëª¨ ì§•í›„ ê°ì§€
- ProtectiveStop: ë³´í˜¸ì •ì§€ ë°œìƒ
```

### 10.3 ì¶”ê°€í•  ê´€ê³„ íƒ€ì…

```
TelemetryWindow â”€â”€HAS_FEATUREâ”€â”€â–¶ ForceSpike
ForceSpike â”€â”€CORRELATED_WITHâ”€â”€â–¶ HighSpeed
ForceSpike â”€â”€INDICATESâ”€â”€â–¶ CollisionRisk
CollisionRisk â”€â”€RECOMMENDSâ”€â”€â–¶ Action:SlowDown
WearAnomaly â”€â”€RECOMMENDSâ”€â”€â–¶ Action:InspectJoints
ProtectiveStop â”€â”€TRIGGERED_BYâ”€â”€â–¶ CollisionRisk
```

---

## 11. êµ¬í˜„ ê³„íš

### Phase 1: ë°ì´í„° ìƒì„± (ë°±ì—”ë“œ)
1. `src/simulation/scenario_sequencer.py` ìƒì„± - ìƒíƒœ ë¨¸ì‹ 
2. `src/simulation/ur5e_telemetry_generator.py` ìƒì„± - UR5e ë°ì´í„° ìƒì„±
3. `src/simulation/correlation_engine.py` ìƒì„± - ìƒê´€ê´€ê³„ ê³„ì‚°
4. ê¸°ì¡´ ì„¼ì„œ SSEì— í†µí•©

### Phase 2: API í™•ì¥ (ë°±ì—”ë“œ)
1. `/api/sensors/correlation/stream` ì—”ë“œí¬ì¸íŠ¸ ì¶”ê°€
2. ê¸°ì¡´ `/api/sensors/stream` í™•ì¥

### Phase 3: í”„ë¡ íŠ¸ì—”ë“œ
1. `CorrelationTable` ì»´í¬ë„ŒíŠ¸ ìƒì„±
2. `useCorrelationSSE` í›… ìƒì„±
3. `LiveView`ì— í†µí•©

### Phase 4: ì˜¨í†¨ë¡œì§€ ì—°ê²°
1. ìƒˆë¡œìš´ ë…¸ë“œ/ì—£ì§€ íƒ€ì… ì¶”ê°€
2. ì´ë²¤íŠ¸ ë°œìƒ ì‹œ ì˜¨í†¨ë¡œì§€ ì—…ë°ì´íŠ¸

---

## 12. ë¼ë²¨ë§ ë° ì•Œë¦¼ ì‹œìŠ¤í…œ

### 12.1 UI ë¼ë²¨ë§

**AI ì˜ˆì¸¡ ê¸°ëŠ¥ì„ì„ ëª…í™•íˆ í‘œì‹œ:**

```
UIì— í‘œì‹œ:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš¡ ì‹¤ì‹œê°„ ì˜ˆì§€ë³´ì „                      [AI ì˜ˆì¸¡] (í„ìŠ¤ í‘œì‹œ) â”‚
â”‚ â€» UR5e + Axia80 ë°ì´í„° ê¸°ë°˜ AI ì˜ˆì¸¡                         â”‚
â”‚ â€» ìœ„í—˜ë„ ì¹´ë“œì— "AI" ë°°ì§€ í‘œì‹œ (ê·¸ë¼ë°ì´ì…˜ ê°•ì¡°)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 12.2 ì´ìƒ ê°ì§€ ì•Œë¦¼ ì‹œìŠ¤í…œ (ì‹ ê·œ) â­

**êµ¬ì„± ìš”ì†Œ:**

| ì»´í¬ë„ŒíŠ¸ | íŒŒì¼ | ì„¤ëª… |
|---------|------|------|
| `alertStore.ts` | `stores/alertStore.ts` | Zustand ê¸°ë°˜ ì´ë²¤íŠ¸ ì €ì¥ì†Œ |
| `useAnomalyAlert.ts` | `hooks/useAnomalyAlert.ts` | ì´ìƒ ê°ì§€ â†’ ì•Œë¦¼ íŠ¸ë¦¬ê±° |
| `useAlertSound.ts` | `hooks/useAlertSound.ts` | Web Audio API ê²½ê³ ìŒ |
| `sonner.tsx` | `components/ui/sonner.tsx` | Toast ì•Œë¦¼ ì»´í¬ë„ŒíŠ¸ |

**Toast ì•Œë¦¼ ì„¤ì •:**

```typescript
// ìœ„ì¹˜: ì •ì¤‘ì•™ ìƒë‹¨ (offset 60px)
// ìµœëŒ€ í‘œì‹œ: 2ê°œ
// í¬ê¸°: ì‘ê²Œ (text-xs, py-1.5, max-w-280px)

// ìœ„í—˜/ê²½ê³ : ë¹¨ê°„ ë°°ê²½ + ë¹¨ê°„ ì•„ì´ì½˜
// ì •ìƒ ë³µê·€: ì´ˆë¡ ë°°ê²½ + ì´ˆë¡ ì²´í¬ ì•„ì´ì½˜
```

**ê²½ê³ ìŒ (Web Audio API):**

| ìœ„í—˜ë„ | ì†Œë¦¬ íŒ¨í„´ |
|-------|----------|
| low | ë‹¨ì¼ ë¹„í”„ (600Hz) |
| medium | 2íšŒ ë¹„í”„ |
| high | 3íšŒ ë¹„í”„ |
| critical | ìƒìŠ¹ìŒ 4íšŒ (800-1100Hz) |

**ìœ„í—˜ ê°ì§€ ê¸°ë¡:**

- ìµœëŒ€ 20ê°œ ì €ì¥ (í™”ë©´ì— 5ê°œ í‘œì‹œ, ë‚˜ë¨¸ì§€ ìŠ¤í¬ë¡¤)
- low ì œì™¸, medium/high/criticalë§Œ ê¸°ë¡
- ì‹œê°„, ì‹œë‚˜ë¦¬ì˜¤, ìœ„í—˜ë„, ìµœëŒ€ í˜, ìœ„í—˜%, ì§€ì†ì‹œê°„ í‘œì‹œ
- ë³´í˜¸ì •ì§€ ë°œìƒ ì‹œ ë³„ë„ í‘œì‹œ
- í•´ì œ ì‹œ "âœ“ í•´ì œ" í‘œì‹œ

---

## ë³€ê²½ ì´ë ¥

| ë‚ ì§œ | ë²„ì „ | ë‚´ìš© |
|-----|------|-----|
| 2024-01-24 | 1.0 | ì´ˆê¸° ì„¤ê³„ ë¬¸ì„œ ì‘ì„± |
| 2024-01-24 | 1.1 | GPT í”¼ë“œë°± ë°˜ì˜: ì‹œë‚˜ë¦¬ì˜¤ ê¸°ë°˜ ìƒì„±, êµ¬ê°„ ìœ ì§€, ìƒíƒœ ì „ì´ ê·œì¹™ ì¶”ê°€, collision_probability â†’ collision_risk_score ë³€ê²½ |
| 2024-01-24 | 2.0 | **êµ¬í˜„ ì™„ë£Œ** âœ… |
| 2026-01-24 | 2.1 | **ì´ìƒ ê°ì§€ ì•Œë¦¼ ì‹œìŠ¤í…œ ì¶”ê°€** - Toast ì•Œë¦¼, ê²½ê³ ìŒ, ì´ë²¤íŠ¸ ê¸°ë¡ |
| 2026-01-24 | 2.2 | **UI ê°œì„ ** - "ìƒê´€ë¶„ì„"â†’"ì‹¤ì‹œê°„ ì˜ˆì§€ë³´ì „", AI ë°°ì§€, HeterogeneousPrediction ì œê±° |
| 2026-01-24 | 2.3 | **ì„¼ì„œ í†µí•© ëª¨ë‹ˆí„°ë§** - RealtimeChartì— UR5e í…”ë ˆë©”íŠ¸ë¦¬ ë°ì´í„° ì¶”ê°€ (TCPì†ë„, í† í¬, ì „ë¥˜) |
| 2026-01-24 | 2.4 | **ì´ë²¤íŠ¸ ê°ì§€ ì¹´ë“œ** - Entity Cardsì— ì¶©ëŒ/ê³¼ë¶€í•˜/ë§ˆëª¨ ëª¨ë‹ˆí„°ë§ ì¹´ë“œ ì¶”ê°€ |
| 2026-01-24 | 2.5 | **ì´ë²¤íŠ¸ í•´ê²° ê´€ë¦¬** - EventList í•´ê²°ì™„ë£Œ ì²´í¬ë°•ìŠ¤, eventResolveStore, EventDetectionCard ì—°ë™, Axia80 ì„¤ëª… ë³€ê²½ |

---

## 13. êµ¬í˜„ ì™„ë£Œ ë‚´ì—­ âœ…

### 13.1 ë°±ì—”ë“œ (Phase 1-2) ì™„ë£Œ

| íŒŒì¼ | ì„¤ëª… |
|-----|------|
| `src/simulation/__init__.py` | ì‹œë®¬ë ˆì´ì…˜ ëª¨ë“ˆ ì´ˆê¸°í™” |
| `src/simulation/scenario_sequencer.py` | ì‹œë‚˜ë¦¬ì˜¤ ìƒíƒœ ë¨¸ì‹  (5ê°œ ì‹œë‚˜ë¦¬ì˜¤, ê°€ì¤‘ì¹˜ ê¸°ë°˜ ì „í™˜, 2ì´ˆ ë³´ê°„) |
| `src/simulation/ur5e_generator.py` | UR5e í…”ë ˆë©”íŠ¸ë¦¬ ìƒì„±ê¸° (ì†ë„, í† í¬, ì „ë¥˜, ì•ˆì „ëª¨ë“œ, ë³´í˜¸ì •ì§€ ë˜ì¹­) |
| `src/simulation/correlation_engine.py` | Axia80+UR5e ìƒê´€ë¶„ì„ ì—”ì§„ (ìœ„í—˜ë„ ê³„ì‚°, ê¶Œì¥ ì¡°ì¹˜) |
| `src/api/routes/sensor.py` | ìƒˆ API ì—”ë“œí¬ì¸íŠ¸ ì¶”ê°€ |
| `src/api/schemas/sensor.py` | ìƒˆ ìŠ¤í‚¤ë§ˆ íƒ€ì… ì¶”ê°€ |

### 13.2 í”„ë¡ íŠ¸ì—”ë“œ (Phase 3) ì™„ë£Œ

| íŒŒì¼ | ì„¤ëª… |
|-----|------|
| `frontend/src/types/api.ts` | IntegratedStreamData ë“± TypeScript íƒ€ì… ì¶”ê°€ |
| `frontend/src/hooks/useSSE.ts` | useIntegratedSSE í›… ì¶”ê°€ |
| `frontend/src/components/live/CorrelationTable.tsx` | **ì‹¤ì‹œê°„ ì˜ˆì§€ë³´ì „** ì»´í¬ë„ŒíŠ¸ (ì´ë¦„ ë³€ê²½) |
| `frontend/src/components/live/LiveView.tsx` | CorrelationTable í†µí•© |

### 13.2.1 ì´ìƒ ê°ì§€ ì•Œë¦¼ ì‹œìŠ¤í…œ (Phase 3.5) ì™„ë£Œ â­ (ì‹ ê·œ)

| íŒŒì¼ | ì„¤ëª… |
|-----|------|
| `frontend/src/stores/alertStore.ts` | Zustand ê¸°ë°˜ ì´ë²¤íŠ¸ ì €ì¥ì†Œ (LiveDetectedEvent, AlertSettings) |
| `frontend/src/hooks/useAnomalyAlert.ts` | ì´ìƒ ê°ì§€ â†’ Toast/Sound/ì´ë²¤íŠ¸ ê¸°ë¡ í†µí•© í›… |
| `frontend/src/hooks/useAlertSound.ts` | Web Audio API ê²½ê³ ìŒ ìƒì„± í›… |
| `frontend/src/components/ui/sonner.tsx` | Toast ì•Œë¦¼ ì»´í¬ë„ŒíŠ¸ (sonner ë˜í¼) |

**ë³€ê²½ëœ UI:**

- "ìƒê´€ë¶„ì„" â†’ "**ì‹¤ì‹œê°„ ì˜ˆì§€ë³´ì „**" ì´ë¦„ ë³€ê²½
- "Simulated" ë°°ì§€ â†’ "**AI ì˜ˆì¸¡**" ë°°ì§€ (ì²­ë¡ìƒ‰ í„ìŠ¤)
- ìœ„í—˜ë„ ì¹´ë“œì— **AI ë°°ì§€** ì¶”ê°€ (ìš°ì¸¡ ìƒë‹¨, ê·¸ë¼ë°ì´ì…˜)
- **HeterogeneousPrediction ì»´í¬ë„ŒíŠ¸ ì œê±°** (CorrelationTableì— í†µí•©)
- ìœ„í—˜ ê°ì§€ ê¸°ë¡ row ì¶”ê°€ (ìµœëŒ€ 20ê°œ, 5ê°œì”© í‘œì‹œ í›„ ìŠ¤í¬ë¡¤)

### 13.2.2 ì„¼ì„œ í†µí•© ëª¨ë‹ˆí„°ë§ ì°¨íŠ¸ (Phase 3.6) ì™„ë£Œ â­ (ì‹ ê·œ)

| íŒŒì¼ | ì„¤ëª… |
|-----|------|
| `frontend/src/components/live/RealtimeChart.tsx` | UR5e í…”ë ˆë©”íŠ¸ë¦¬ ë°ì´í„° ì¶”ê°€ |
| `frontend/src/components/live/LiveView.tsx` | integratedData ì „ë‹¬ |

**RealtimeChart ê°œì„  ë‚´ìš©:**

- ì œëª©: "í˜ ì„¼ì„œ ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§" â†’ "**UR5e + Axia80 ì„¼ì„œ í†µí•© ëª¨ë‹ˆí„°ë§**"
- **UR5e í…”ë ˆë©”íŠ¸ë¦¬ ì¶• ì¶”ê°€**:
  | ì¶• | í•œê¸€ëª… | ë‹¨ìœ„ | ìƒ‰ìƒ |
  |---|-------|-----|------|
  | `tcp_speed` | TCP ì†ë„ | m/s | ë¡œì¦ˆ (#f43f5e) |
  | `joint_torque_sum` | ê´€ì ˆ í† í¬ í•© | Nm | ë³´ë¼ (#a855f7) |
  | `joint_current_avg` | í‰ê·  ì „ë¥˜ | A | ì²­ë¡ (#14b8a6) |
- ì²´í¬ë°•ìŠ¤ ê·¸ë£¹í™”: `Axia80:` / `UR5e:` ë ˆì´ë¸”ë¡œ ì‹œê°ì  ë¶„ë¦¬
- `integratedData` propìœ¼ë¡œ í†µí•© SSE ìŠ¤íŠ¸ë¦¼ ë°ì´í„° ìˆ˜ì‹ 

### 13.2.3 ì´ë²¤íŠ¸ ê°ì§€ ì¹´ë“œ (Phase 3.7) ì™„ë£Œ â­ (ì‹ ê·œ)

| íŒŒì¼ | ì„¤ëª… |
|-----|------|
| `frontend/src/components/live/EventDetectionCard.tsx` | ì´ë²¤íŠ¸ ê°ì§€ ì¹´ë“œ ì‹ ê·œ |
| `frontend/src/components/live/LiveView.tsx` | Entity Cardsì— ì¹´ë“œ ì¶”ê°€ |

**EventDetectionCard ê¸°ëŠ¥:**

- **ì‹¤ì œ ë°œìƒí•œ ì´ë²¤íŠ¸ í‘œì‹œ** (EventListì˜ events ë°ì´í„° ê¸°ë°˜)
- **ì´ë²¤íŠ¸ íƒ€ì…ë³„ ê°œìˆ˜**: ì¶©ëŒ Nê±´, ê³¼ë¶€í•˜ Nê±´, ë“œë¦¬í”„íŠ¸ Nê±´
- **ì´ ì´ë²¤íŠ¸ ìˆ˜ ë° ì‹¬ê°ë„**: ìœ„í—˜(critical), ê²½ê³ (warning), ì •ìƒ(info)
- **ì´ë²¤íŠ¸ ì—†ì„ ë•Œ**: "ì •ìƒ" í‘œì‹œ (ë…¹ìƒ‰ ì²´í¬ ì•„ì´ì½˜)
- **ì´ë²¤íŠ¸ ìˆì„ ë•Œ**: ë¹¨ê°„ìƒ‰/ë…¸ë€ìƒ‰ í…Œë‘ë¦¬ + í„ìŠ¤ ì• ë‹ˆë©”ì´ì…˜
- Fy (ì¢Œìš°ë ¥) ì¹´ë“œ ì˜†ì— ìœ„ì¹˜

### 13.2.4 ì´ë²¤íŠ¸ í•´ê²° ê´€ë¦¬ ì‹œìŠ¤í…œ (Phase 3.8) ì™„ë£Œ â­ (ì‹ ê·œ)

| íŒŒì¼ | ì„¤ëª… |
|-----|------|
| `frontend/src/stores/eventResolveStore.ts` | ì´ë²¤íŠ¸ í•´ê²° ìƒíƒœ ì €ì¥ì†Œ (Zustand + persist) |
| `frontend/src/components/live/EventList.tsx` | "í•´ê²°ì™„ë£Œ" ì²´í¬ë°•ìŠ¤ ì»¬ëŸ¼ ì¶”ê°€, ì»¬ëŸ¼ ê°„ê²© ê· ë“±í™” |
| `frontend/src/components/live/EventDetectionCard.tsx` | í•´ê²°ëœ ì´ë²¤íŠ¸ ì œì™¸ ì¹´ìš´íŠ¸ |
| `frontend/messages/ko.json`, `en.json` | Axia80 ì„¼ì„œ ì„¤ëª… ë³€ê²½ |

**eventResolveStore ê¸°ëŠ¥:**

- Zustand + persist ê¸°ë°˜ ìƒíƒœ ê´€ë¦¬
- LocalStorage ì˜ì†í™” (ìƒˆë¡œê³ ì¹¨í•´ë„ ìœ ì§€)
- `resolvedEventIds`: í•´ê²°ëœ ì´ë²¤íŠ¸ ID Set
- `resolveEvent(id)`, `unresolveEvent(id)`, `toggleResolve(id)` ì•¡ì…˜

**EventList ë³€ê²½ ë‚´ìš©:**

- **"í•´ê²°ì™„ë£Œ" ì²´í¬ë°•ìŠ¤ ì»¬ëŸ¼ ì¶”ê°€** (í…Œì´ë¸” ë§¨ ë)
- **ì»¬ëŸ¼ ê°„ê²© ê· ë“±í™”**: 7ê°œ ì»¬ëŸ¼ (12% / 12% / 14% / 14% / 14% / 20% / 14%)
- ì²´í¬ ì‹œ í•´ë‹¹ í–‰ ì—°í•˜ê²Œ í‘œì‹œ (opacity-50, bg-green-950/10)
- ë…¹ìƒ‰ ì²´í¬ ì•„ì´ì½˜ (CheckCircle2) í‘œì‹œ
- ì²´í¬ë°•ìŠ¤ í´ë¦­ ì‹œ í–‰ í´ë¦­ ì´ë²¤íŠ¸ ì „íŒŒ ë°©ì§€ (stopPropagation)

**EventDetectionCard ë³€ê²½ ë‚´ìš©:**

- `useEventResolveStore` ì—°ë™
- **í•´ê²°ëœ ì´ë²¤íŠ¸ ì œì™¸**í•˜ì—¬ ë¯¸í•´ê²° ì´ë²¤íŠ¸ë§Œ ì¹´ìš´íŠ¸
- í‘œì‹œ í˜•ì‹: "ë¯¸í•´ê²° Nê±´ (ìœ„í—˜ X, ê²½ê³  Y) / í•´ê²° Mê±´"
- í•´ê²°ëœ ì´ë²¤íŠ¸ê°€ ìˆìœ¼ë©´ ë…¹ìƒ‰ìœ¼ë¡œ í•´ê²° ê±´ìˆ˜ í‘œì‹œ

**i18n ë³€ê²½ ë‚´ìš©:**

- Axia80 ì„¼ì„œ ì„¤ëª…: "ATI 6ì¶• í˜/í† í¬ ì„¼ì„œ" â†’ "Fz, Fx, Fy + ì´ë²¤íŠ¸ ê°ì§€"

### 13.3 ìƒˆë¡œìš´ API ì—”ë“œí¬ì¸íŠ¸

```
GET  /api/sensors/stream/integrated   - UR5e+Axia80 í†µí•© SSE ìŠ¤íŠ¸ë¦¼
POST /api/sensors/stream/scenario     - ì‹œë‚˜ë¦¬ì˜¤ ê°•ì œ ì „í™˜ (í…ŒìŠ¤íŠ¸ìš©)
GET  /api/sensors/stream/statistics   - ìŠ¤íŠ¸ë¦¼ í†µê³„ ì¡°íšŒ
POST /api/sensors/stream/reset        - ìŠ¤íŠ¸ë¦¼ ë¦¬ì…‹
```

### 13.4 í…ŒìŠ¤íŠ¸ ê²°ê³¼

ì¶©ëŒ ì‹œë‚˜ë¦¬ì˜¤ ì‹œë®¬ë ˆì´ì…˜ í…ŒìŠ¤íŠ¸:
```
Phase 0-30%:  ì ‘ê·¼ ë‹¨ê³„ - speed â†‘, force â†‘, risk: low
Phase 40-50%: ì ‘ì´‰ ìˆœê°„ - force spike (107Nâ†’147N), protective_stop ë°œë™
Phase 50-70%: ë°˜ì‘ ë‹¨ê³„ - force â†“, robot stopped
Phase 70-90%: ë³µêµ¬ ë‹¨ê³„ - force â†“, risk: low
```

### 13.5 ë¯¸êµ¬í˜„ (Phase 4)

- [ ] ì˜¨í†¨ë¡œì§€ ê·¸ë˜í”„ì— ì´ë²¤íŠ¸ ë…¸ë“œ/ì—£ì§€ ì¶”ê°€ (TelemetryWindow, ForceSpike ë“±)
- [ ] ì´ë²¤íŠ¸ ë°œìƒ ì‹œ ì˜¨í†¨ë¡œì§€ ìë™ ì—…ë°ì´íŠ¸

### 13.6 ì‹œì‘ ë°©ë²•

```bash
# ë°±ì—”ë“œ ì¬ì‹œì‘ í•„ìš” (ìƒˆ ì—”ë“œí¬ì¸íŠ¸ í™œì„±í™”)
python -m uvicorn src.api.main:app --reload --host 0.0.0.0 --port 8000

# í”„ë¡ íŠ¸ì—”ë“œ
cd frontend && npm run dev
```

Live íƒ­ì—ì„œ "UR5e + Axia80 ìƒê´€ë¶„ì„" ì¹´ë“œ í™•ì¸!
