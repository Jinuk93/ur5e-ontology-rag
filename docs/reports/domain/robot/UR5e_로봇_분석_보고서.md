# UR5e 협동로봇 분석 보고서

> **목적**: UR5e 로봇의 이해와 Axia80 센서, 에러코드와의 관계 정의
> **대상 독자**: 협동로봇에 익숙하지 않은 사람도 이해할 수 있도록 작성

---

## 목차

1. [협동로봇이란 무엇인가?](#1-협동로봇이란-무엇인가)
2. [UR5e 로봇 소개](#2-ur5e-로봇-소개)
3. [로봇의 구조 - 6축 조인트](#3-로봇의-구조---6축-조인트)
4. [컨트롤 박스와 티치 펜던트](#4-컨트롤-박스와-티치-펜던트)
5. [로봇의 상태와 동작 모드](#5-로봇의-상태와-동작-모드)
6. [안전 시스템](#6-안전-시스템)
7. [에러 코드 체계](#7-에러-코드-체계)
8. [Axia80 센서와의 관계](#8-axia80-센서와의-관계)
9. [우리 시스템의 7일치 데이터 분석](#9-우리-시스템의-7일치-데이터-분석)
10. [온톨로지 관점에서의 UR5e](#10-온톨로지-관점에서의-ur5e)

---

# 1. 협동로봇이란 무엇인가?

## 1.1 기본 개념

**협동로봇(Collaborative Robot, Cobot)** = 사람과 같은 공간에서 **안전하게 함께 작업**할 수 있는 로봇

```
전통적인 산업용 로봇:
┌─────────────────────────────────────────┐
│          ⚠️ 위험 구역 ⚠️                │
│     ┌─────────┐                        │
│     │  로봇   │  ← 사람 접근 금지       │
│     └─────────┘                        │
│     [안전 펜스로 격리]                   │
└─────────────────────────────────────────┘

협동로봇:
┌─────────────────────────────────────────┐
│                                         │
│   👷 작업자  ←→  🤖 로봇               │
│                                         │
│   [같은 공간에서 협업 가능]              │
│   [충돌 감지 시 즉시 정지]               │
└─────────────────────────────────────────┘
```

## 1.2 협동로봇이 가능한 이유

| 기술 | 설명 |
|------|------|
| **힘/토크 센서** | 외부 힘을 감지하여 충돌 인식 |
| **속도 제한** | 사람 근처에서 저속 운전 |
| **전류 제한** | 모터 출력 제한으로 충돌 시 충격 최소화 |
| **안전 정지** | 이상 감지 시 즉각 정지 |

## 1.3 왜 협동로봇을 사용하나?

```
기존 자동화의 문제:
- 대량 생산에만 적합
- 설치 비용 높음 (안전 펜스, 넓은 공간)
- 유연성 낮음 (제품 변경 시 재설정 필요)

협동로봇의 장점:
- 소량 다품종 생산에 적합
- 설치 간편 (안전 펜스 불필요)
- 유연한 재배치 가능
- 직관적인 프로그래밍 (티치 펜던트)
```

---

# 2. UR5e 로봇 소개

## 2.1 제품 개요

| 항목 | 내용 |
|------|------|
| **제조사** | Universal Robots A/S (덴마크) |
| **제품명** | UR5e (e-Series) |
| **출시** | 2018년 (e-Series) |
| **용도** | 경량 협동로봇, 다목적 자동화 |
| **가격대** | 약 $35,000~$45,000 |

## 2.2 UR 로봇 라인업

```
Universal Robots 제품군:

┌──────────┬──────────┬──────────┬──────────┐
│   UR3e   │   UR5e   │  UR10e   │  UR16e   │
├──────────┼──────────┼──────────┼──────────┤
│ 페이로드 │ 페이로드 │ 페이로드 │ 페이로드 │
│   3kg    │   5kg    │  12.5kg  │   16kg   │
├──────────┼──────────┼──────────┼──────────┤
│  리치    │  리치    │  리치    │  리치    │
│  500mm   │  850mm   │  1300mm  │  900mm   │
├──────────┼──────────┼──────────┼──────────┤
│ 탁상용   │ 범용     │ 대형     │ 중량물   │
│ 소형작업 │ 중형작업 │ 넓은범위 │ 특화     │
└──────────┴──────────┴──────────┴──────────┘
              ↑
         [우리가 사용하는 모델]
```

## 2.3 UR5e 상세 스펙

| 항목 | 사양 | 의미 |
|------|------|------|
| **자유도 (DOF)** | 6축 | 6개의 회전 관절 |
| **페이로드** | 5kg | 들 수 있는 최대 무게 |
| **리치 (작업 반경)** | 850mm | 팔이 닿는 최대 거리 |
| **반복 정밀도** | ±0.03mm | 같은 위치 반복 정확도 |
| **무게** | 20.6kg | 로봇 팔 자체 무게 |
| **설치 면적** | Ø190mm | 바닥 고정에 필요한 면적 |

### 속도 및 힘 사양

| 항목 | 값 |
|------|-----|
| **TCP 최대 속도** | 1 m/s (초당 1미터) |
| **조인트 최대 속도** | 180°/s (Base~Elbow), 360°/s (Wrist) |
| **조인트 토크** | 150Nm (Base~Elbow), 28Nm (Wrist) |

### 전기 사양

| 항목 | 값 |
|------|-----|
| **입력 전압** | 100-240V AC, 50-60Hz |
| **평균 소비 전력** | 200W (일반 작업) |
| **최대 소비 전력** | 615W |

---

# 3. 로봇의 구조 - 6축 조인트

## 3.1 6축의 의미

로봇 팔이 **6개의 관절**로 이루어져 있다는 것은, **사람의 팔처럼 자유롭게 움직일 수 있다**는 의미입니다.

```
사람의 팔:                    UR5e 로봇:

   어깨 (3축)                    Joint 0 (Base)
      ↓                              ↓
   팔꿈치 (1축)                  Joint 1 (Shoulder)
      ↓                              ↓
   손목 (2축)                    Joint 2 (Elbow)
      ↓                              ↓
   손                            Joint 3, 4, 5 (Wrist)
                                     ↓
                                 Tool Flange
                                     ↓
                                 그리퍼/센서/공구
```

## 3.2 각 조인트 상세

```
UR5e 로봇 구조:

         [Base] ← Joint 0: 좌우 회전 (±360°)
            │
            │
    ┌───────┴───────┐
    │   Shoulder    │ ← Joint 1: 앞뒤 기울임 (±360°)
    └───────┬───────┘
            │
            │  (Upper Arm)
            │
    ┌───────┴───────┐
    │    Elbow      │ ← Joint 2: 팔꿈치 굽힘 (±360°)
    └───────┬───────┘
            │
            │  (Forearm)
            │
    ┌───────┴───────┐
    │   Wrist 1     │ ← Joint 3: 손목 회전 (±360°)
    └───────┬───────┘
    ┌───────┴───────┐
    │   Wrist 2     │ ← Joint 4: 손목 기울임 (±360°)
    └───────┬───────┘
    ┌───────┴───────┐
    │   Wrist 3     │ ← Joint 5: 손목 비틀기 (±360°)
    └───────┬───────┘
            │
      [Tool Flange] ← 여기에 도구/센서 장착
            │
       [Axia80] ← F/T 센서
            │
       [Gripper] ← 그리퍼
```

## 3.3 조인트별 역할과 부하

| Joint | 이름 | 역할 | 최대 토크 | 최대 속도 |
|-------|------|------|-----------|-----------|
| **0** | Base | 전체 회전 (좌우) | 150 Nm | 180°/s |
| **1** | Shoulder | 팔 들어올림 | 150 Nm | 180°/s |
| **2** | Elbow | 팔 굽힘 | 150 Nm | 180°/s |
| **3** | Wrist 1 | 손목 회전 | 28 Nm | 360°/s |
| **4** | Wrist 2 | 손목 기울임 | 28 Nm | 360°/s |
| **5** | Wrist 3 | 손목 비틀기 | 28 Nm | 360°/s |

### 조인트 부하 분석

```
무거운 물체를 들 때 부하가 집중되는 조인트:

페이로드 5kg, 팔을 쭉 뻗었을 때:

          [Base]
             │
             ▼
      ┌──────────┐
      │ Shoulder │ ← ⚠️ 가장 큰 부하 (팔 전체 + 페이로드)
      └────┬─────┘
           │
      ┌────┴─────┐
      │  Elbow   │ ← ⚠️ 두 번째 부하 (아래팔 + 페이로드)
      └────┬─────┘
           │
      ┌────┴─────┐
      │  Wrist   │ ← 상대적으로 적은 부하
      └────┬─────┘
           │
      [5kg 페이로드]

→ Joint 1, 2에 과부하 시 모터 과열, 수명 단축 위험
→ Axia80 센서의 Fz 값으로 페이로드 모니터링 필수
```

## 3.4 TCP (Tool Center Point)

**TCP** = 로봇이 제어하는 기준점 (도구 끝점)

```
기본 TCP (Tool Flange):          사용자 정의 TCP:

     [Wrist 3]                      [Wrist 3]
         │                              │
    ═════╪═════ ← Tool Flange      ═════╪═════
         ●  ← 기본 TCP                  │
                                    [Axia80]
                                        │
                                   [Gripper]
                                        │
                                        ● ← 사용자 정의 TCP
                                            (그리퍼 끝점)
```

TCP 설정이 중요한 이유:
- 정확한 위치 제어
- 올바른 힘/토크 계산
- 충돌 감지 정확도

---

# 4. 컨트롤 박스와 티치 펜던트

## 4.1 컨트롤 박스 (Control Box)

로봇의 **"두뇌"** 역할을 하는 장치

```
┌─────────────────────────────────────────┐
│           Control Box 내부              │
├─────────────────────────────────────────┤
│                                         │
│  ┌─────────────┐  ┌─────────────┐      │
│  │ Motherboard │  │   Power     │      │
│  │  (메인보드)  │  │   Supply    │      │
│  │             │  │  (전원부)   │      │
│  └─────────────┘  └─────────────┘      │
│                                         │
│  ┌─────────────┐  ┌─────────────┐      │
│  │   Safety    │  │   Joint     │      │
│  │   Control   │  │   Drivers   │      │
│  │   Board     │  │ (모터제어)   │      │
│  └─────────────┘  └─────────────┘      │
│                                         │
└─────────────────────────────────────────┘
```

### 주요 구성 요소

| 구성 요소 | 역할 |
|----------|------|
| **Motherboard** | 로봇 제어 연산, 프로그램 실행 |
| **Safety Control Board** | 안전 기능 담당 (이중화 프로세서) |
| **Power Supply** | 48V DC 전원 공급 |
| **Joint Drivers** | 각 조인트 모터 제어 |

### Safety Control Board의 특징

```
이중화 구조 (Dual-Channel):

┌─────────────────────────────────────────┐
│         Safety Control Board            │
├─────────────────────────────────────────┤
│                                         │
│  ┌───────────┐    ┌───────────┐        │
│  │ Processor │    │ Processor │        │
│  │    A      │ ⟷ │    B      │        │
│  │ (SafetySys1)   │ (SafetySys2)       │
│  └───────────┘    └───────────┘        │
│        │                │               │
│        └────────┬───────┘               │
│                 │                       │
│          [비교 및 검증]                  │
│                 │                       │
│        두 결과가 다르면 → 안전 정지      │
│                                         │
└─────────────────────────────────────────┘

→ 하나의 프로세서가 오작동해도 다른 프로세서가 감지
→ ISO 13849 PLd Category 3 안전 등급 충족
```

## 4.2 티치 펜던트 (Teach Pendant)

로봇을 **직접 조작하고 프로그래밍**하는 태블릿 형태의 장치

```
┌─────────────────────────────────────────┐
│            Teach Pendant                │
├─────────────────────────────────────────┤
│  ┌───────────────────────────────────┐  │
│  │                                   │  │
│  │          12" 터치스크린           │  │
│  │                                   │  │
│  │         [PolyScope UI]           │  │
│  │                                   │  │
│  └───────────────────────────────────┘  │
│                                         │
│     [Freedrive]  [E-Stop]  [3PE]       │
│        버튼      비상정지   3위치       │
│                            활성화       │
│                            장치        │
└─────────────────────────────────────────┘
```

### 주요 버튼

| 버튼 | 기능 |
|------|------|
| **Freedrive** | 손으로 로봇을 직접 움직여서 위치 지정 |
| **E-Stop** | 비상 정지 (빨간 버튼) |
| **3PE (3-Position Enabling)** | 프로그램 실행 중 안전 장치 |

### 3위치 활성화 장치 (3PE)

```
3PE 버튼 상태:

[Released]     [Light Press]    [Full Press]
   해제            가볍게 누름       세게 누름
     │                │                │
     ▼                ▼                ▼
  로봇 정지      프로그램 실행      로봇 정지
                  (안전 모드)      (비상 정지)

→ 작업자가 놀라서 손을 떼거나 세게 쥐면 로봇이 정지
→ 안전한 수동 조작을 위한 설계
```

---

# 5. 로봇의 상태와 동작 모드

## 5.1 로봇 상태 (Robot State)

```
로봇 상태 전이도:

┌─────────┐     전원 ON      ┌─────────┐
│  OFF    │ ───────────────→ │ Booting │
└─────────┘                  └────┬────┘
                                  │
                                  ▼
                            ┌─────────┐
                            │  Idle   │ ← 대기 상태
                            └────┬────┘
                                  │
              ┌───────────────────┼───────────────────┐
              │                   │                   │
              ▼                   ▼                   ▼
        ┌─────────┐         ┌─────────┐         ┌─────────┐
        │ Running │         │Freedrive│         │ Backdrive│
        │ (실행)  │         │(수동이동)│         │(백드라이브)
        └────┬────┘         └─────────┘         └─────────┘
              │
              ▼
     ┌────────────────┐
     │ Protective Stop│ ← 보호 정지
     │   (에러 발생)   │
     └────────────────┘
```

## 5.2 동작 모드

| 모드 | 설명 | 안전 수준 |
|------|------|----------|
| **Automatic** | 프로그램 자동 실행 | 최대 속도 |
| **Manual Reduced** | 수동 조작, 속도 제한 (250mm/s) | 안전 모드 |
| **Manual High Speed** | 수동 조작, 고속 허용 | 전문가용 |

## 5.3 작업 사이클

우리 시스템에서 정의한 UR5e의 작업 사이클:

```
일반적인 Pick & Place 사이클:

시간 →
├────┬─────┬────┬─────┬────┬────┤
│idle│appr.│pick│retr.│appr│plc │ ...반복
├────┼─────┼────┼─────┼────┼────┤
│ 5s │ 3s  │ 2s │ 3s  │ 3s │ 2s │

idle: 대기 (Fz ≈ -15N, 그리퍼만)
approach: 접근 (Fz 변화 없음)
pick: 물건 집기 (Fz 증가, 물건 무게 추가)
retract: 후퇴 (Fz 유지)
approach: 목표 위치 접근
place: 물건 놓기 (Fz 감소, 물건 무게 감소)
```

---

# 6. 안전 시스템

## 6.1 안전 기능 개요

UR5e는 **ISO 13849 PLd Category 3** 안전 등급을 충족합니다.

```
안전 기능 계층:

Level 3: ┌─────────────────────────────────┐
         │  E-Stop (비상 정지)              │ ← 최우선
         │  - 즉시 전원 차단                │
         └─────────────────────────────────┘
                        │
Level 2: ┌─────────────────────────────────┐
         │  Safety Stop (안전 정지)         │
         │  - Category 0/1/2 정지           │
         │  - 안전 영역 위반                │
         └─────────────────────────────────┘
                        │
Level 1: ┌─────────────────────────────────┐
         │  Protective Stop (보호 정지)     │ ← 가장 일반적
         │  - 힘/충돌 감지                  │
         │  - 속도 위반                     │
         └─────────────────────────────────┘
                        │
Level 0: ┌─────────────────────────────────┐
         │  Reduced Mode (감속 모드)        │
         │  - 속도/힘 제한                  │
         └─────────────────────────────────┘
```

## 6.2 정지 카테고리 (Stop Categories)

| 카테고리 | 설명 | 특징 |
|----------|------|------|
| **Category 0** | 즉시 전원 차단 | 제동 없이 정지, 관성으로 이동 가능 |
| **Category 1** | 제어된 감속 후 전원 차단 | 부드러운 정지 후 전원 OFF |
| **Category 2** | 제어된 정지, 전원 유지 | 정지 후 재시작 가능 |

## 6.3 보호 정지 (Protective Stop)

**가장 자주 발생하는 안전 이벤트**

발생 원인:
- 외부 힘/충돌 감지
- 조인트 위치 이탈
- 속도 제한 위반
- 힘 제한 위반

```
Protective Stop 발생 시나리오:

정상 운전 중:
Fz: ───────────────

충돌 발생:                     복구:
Fz: ─────────┐
             │ (급격한 힘 증가)
             │
             ▼
    [Protective Stop 발생]
             │
             ▼
    [로봇 정지, 에러 로그 기록]
             │
             ▼
    [원인 확인 및 조치]
             │
             ▼
    [운전 재개]
```

## 6.4 안전 설정 파라미터

| 파라미터 | 기본값 | 설명 |
|----------|--------|------|
| **Force** | 150N | TCP에서 허용되는 최대 힘 |
| **Power** | 80W | 허용되는 최대 충격 에너지 |
| **Speed** | 1.5 m/s | TCP 최대 속도 |
| **Momentum** | 25 kg·m/s | 최대 운동량 |

---

# 7. 에러 코드 체계

## 7.1 에러 코드 구조

UR 로봇의 에러 코드는 **CXXX** 또는 **CXAXXX** 형식입니다.

```
에러 코드 형식:

C + 번호 + (선택적) A + 세부번호

예시:
C4      → 통신 에러 (상위 카테고리)
C4A1    → 컨트롤러 통신 손실 (세부 에러)
C4A17   → Joint 5 통신 손실 (더 세부적)

C153    → Safety System Violation
C189    → Payload Exceeded
```

## 7.2 주요 에러 코드 분류

### 통신 에러 (C1~C17)

| 코드 | 이름 | 설명 |
|------|------|------|
| **C4** | Communication Issue | 내부 통신 장애 |
| C4A1 | Lost comm with Controller | 컨트롤러-안전보드 통신 끊김 |
| C4A12~17 | Lost comm with Joint X | 특정 조인트 통신 끊김 |
| C4A18 | Lost comm with Tool | 툴 통신 끊김 |
| **C11** | Bad CRC | 시리얼 통신 데이터 오류 |
| **C17** | SCB-MB Comm Error | 안전보드-메인보드 통신 오류 |

### 조인트/모터 에러 (C25~C55)

| 코드 | 이름 | 설명 |
|------|------|------|
| **C25** | Motor Encoder Index Missing | 엔코더 인덱스 누락 |
| **C26** | Motor Encoder Index Drift | 엔코더 드리프트 감지 |
| **C50** | Motor Current | 모터 전류 이상 |
| **C51** | Motor Voltage | 모터 전압 이상 |
| **C55** | Motor Temperature | 모터 과열 |

### 안전 관련 에러 (C150~C200)

| 코드 | 이름 | 설명 | Axia80 관련 |
|------|------|------|------------|
| **C119** | Protective Stop | 보호 정지 (힘/충돌 감지) | ⭐ Fz 스파이크 |
| **C153** | Safety System Violation | 안전 시스템 위반 | ⭐ 충돌 패턴 |
| **C189** | Payload Exceeded | 페이로드 초과 | ⭐ Fz 지속적 고값 |
| **C190** | Joint Position Deviation | 조인트 위치 이탈 | Fx, Fy 영향 가능 |
| **C191** | Joint Speed Violation | 조인트 속도 위반 | - |
| **C192** | Joint Torque Deviation | 조인트 토크 이탈 | Tx, Ty, Tz 관련 |

## 7.3 에러 코드와 센서 패턴의 관계

```
센서 패턴 → 에러 코드 매핑:

┌─────────────────┐          ┌─────────────────┐
│  COLLISION      │          │                 │
│  (Fz 급격 변화) │ ───────→ │  C153, C119     │
│  > 500N/100ms   │          │  (Safety Stop)  │
└─────────────────┘          └─────────────────┘

┌─────────────────┐          ┌─────────────────┐
│  OVERLOAD       │          │                 │
│  (Fz 지속 고값) │ ───────→ │  C189           │
│  > 300N, 5초+   │          │  (Payload)      │
└─────────────────┘          └─────────────────┘

┌─────────────────┐          ┌─────────────────┐
│  VIBRATION      │          │                 │
│  (토크 진동)    │ ───────→ │  C192, C55      │
│  고주파 반복    │          │  (조인트 문제)  │
└─────────────────┘          └─────────────────┘
```

## 7.4 에러 심각도 분류

| 심각도 | 설명 | 예시 | 조치 |
|--------|------|------|------|
| **Critical** | 즉시 정지 필수 | C153, E-Stop | 원인 제거 후 재시작 |
| **High** | 작업 중단 권장 | C189, C119 | 설정 확인 후 재시작 |
| **Medium** | 경고, 모니터링 | C4 (일시적) | 로그 확인, 재발 시 점검 |
| **Low** | 정보성 | C14 (Debug) | 참고용 |

---

# 8. Axia80 센서와의 관계

## 8.1 물리적 연결

```
UR5e + Axia80 연결 구조:

    [UR5e Robot]
         │
    [Joint 5 - Wrist 3]
         │
    ═════╪═════  ← Tool Flange
         │
    ┌────┴────┐
    │ Axia80  │  ← F/T 센서
    │  센서   │     (힘/토크 측정)
    └────┬────┘
         │
    ┌────┴────┐
    │ Gripper │  ← 그리퍼
    │  /Tool  │     (작업 도구)
    └────┬────┘
         │
    [Workpiece]  ← 작업물
```

## 8.2 데이터 흐름

```
Axia80 데이터 흐름:

[물리적 힘/토크]
      │
      ▼
┌───────────┐    ┌───────────┐    ┌───────────┐
│  Axia80   │───→│  UR5e     │───→│ PolyScope │
│  센서     │    │ Controller│    │   /API    │
│           │    │           │    │           │
│ 6축 측정  │    │ 내부 처리  │    │ 사용자에게 │
│ Fx~Tz    │    │ 안전 판단  │    │ 표시/기록  │
└───────────┘    └───────────┘    └───────────┘
      │                │                │
      │                │                │
      ▼                ▼                ▼
   Raw Data      Safety Logic      Application
```

## 8.3 센서값과 로봇 상태의 상관관계

| Axia80 측정 | UR5e 관점 | 관련 에러 |
|-------------|-----------|----------|
| Fz 정상 (-15~-60N) | 정상 작업 | - |
| Fz 급증 (>500N 급변) | 충돌 감지 | C153, C119 |
| Fz 지속 고값 (>150N) | 과부하 | C189 |
| Tx, Ty 진동 | 기계적 문제 | C192, C55 |
| 전체 노이즈 증가 | 센서 문제 | 캘리브레이션 필요 |

## 8.4 좌표계 변환

```
Axia80 좌표계 → UR5e TCP 좌표계:

Axia80 센서 자체:              UR5e TCP 관점:
                               (로봇 베이스 기준)
     Z (센서→툴)                    Z (위)
     ↑                              ↑
     │                              │
     │                              │
     ┼───→ X                        ┼───→ X
    /                              /
   Y                              Y

※ 센서 장착 방향에 따라 좌표 변환 필요
※ TCP 설정에서 센서 위치/방향 정의 필수
```

---

# 9. 우리 시스템의 7일치 데이터 분석

## 9.1 데이터 개요

| 항목 | 값 |
|------|-----|
| **기간** | 2024-01-15 ~ 2024-01-21 (7일) |
| **총 레코드** | 604,800개 (1초당 1개) |
| **센서** | ATI Axia80 M8 |
| **저장 형식** | Parquet |

## 9.2 정상 운영 파라미터

```yaml
# 무부하 상태 (Idle)
Fz: -15N ± 3N  (그리퍼 자중)
Fx, Fy: 0N ± 2N
Tx, Ty, Tz: ≈ 0Nm

# 작업 중 (페이로드별)
Light (0.5~1.5kg):   Fz ≈ -30N
Normal (1.5~3.0kg):  Fz ≈ -50N
Heavy (3.0~5.0kg):   Fz ≈ -75N
```

## 9.3 설계된 이상 시나리오

### 시나리오 A: 전조 → 충돌 → Safety Stop

```
타임라인:

시간  ─────────────────────────────────────→
       │←── 20분 ──→│←즉시→│
       │            │      │
       │  전조 증상  │ 충돌  │
       │ (진동 30%↑)│(Fz급증)│
       │            │      │
       └────────────┴──────┘
                           │
                           ▼
                    [C153 에러 발생]

발생: 2회/주
- EVT-001: 01/17 13:40 (B조, Fz peak: 824N)
- EVT-002: 01/20 09:40 (A조, Fz peak: 817N)
```

### 시나리오 B: 반복 재발 과부하

```
4일 연속 같은 시간대 같은 제품에서 과부하:

Day 1 (01/16): 14:17 | Fz=321N | 10초 | 에러 없음
Day 2 (01/17): 14:32 | Fz=364N | 23초 | 에러 없음
Day 3 (01/18): 14:12 | Fz=366N | 23초 | 에러 없음
Day 4 (01/19): 14:30 | Fz=397N | 24초 | C189 발생! ⚠️

패턴:
- 시간대: 14:00~15:00 (B조)
- 제품: PART-C (4.2kg, Heavy)
- 점점 심해지다가 결국 에러 발생
```

### 시나리오 C: 오탐/유사 증상

| 이벤트 | 유형 | 설명 | 에러 |
|--------|------|------|------|
| EVT-007 | Tool Change | GRIPPER-02로 교체, Fz -7N 이동 | 없음 (정상) |
| EVT-008 | Tool Change | GRIPPER-01로 복귀, Fz +7N 이동 | 없음 (정상) |
| EVT-009 | Recalibration | 센서 캘리브레이션, 값 점프 | 없음 (정상) |
| EVT-010 | Drift | 4시간 드리프트, 문서에 해당 조치 없음 | ABSTAIN |

## 9.4 감지된 패턴 요약

| 패턴 유형 | 감지 수 | 예상 에러 |
|----------|---------|----------|
| **Collision** | 2개 | C153, C119 |
| **Overload** | 4개 | C189 |
| **Drift** | 11개 | - (대부분 정상 변동) |

## 9.5 데이터에서 배울 수 있는 것

```
1. 전조 증상의 중요성:
   - 충돌 전 20분간 진동 증가 패턴 존재
   - 조기 감지 시 사고 예방 가능

2. 반복 패턴의 위험성:
   - 같은 시간, 같은 제품에서 반복 발생
   - 점진적 악화 → 결국 에러 발생
   - 근본 원인 해결 필요 (PART-C 무게? 그립 위치?)

3. 정상 변동과 이상의 구분:
   - 툴 교체, 캘리브레이션 → 정상적인 값 변화
   - 온톨로지가 "컨텍스트"를 알아야 판단 가능
```

---

# 10. 온톨로지 관점에서의 UR5e

## 10.1 UR5e가 온톨로지에서 가지는 위치

```
온톨로지 구조에서의 UR5e:

┌─────────────────────────────────────────────────────────────┐
│                     Equipment Domain                        │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌─────────┐                                               │
│  │  UR5e   │ ← 최상위 로봇 엔티티                          │
│  │ (Robot) │                                               │
│  └────┬────┘                                               │
│       │                                                     │
│       ├──→ [Control Box] ──→ [Motherboard]                 │
│       │                  ──→ [Safety Control Board]        │
│       │                  ──→ [Power Supply]                │
│       │                                                     │
│       ├──→ [Robot Arm] ──→ [Joint 0~5]                     │
│       │               ──→ [Tool Flange]                    │
│       │                         │                          │
│       │                    [Axia80] ← 센서 연결점          │
│       │                         │                          │
│       │                    [Gripper]                       │
│       │                                                     │
│       └──→ [Teach Pendant]                                 │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

## 10.2 UR5e 관련 엔티티 정의

```yaml
# 로봇 엔티티
Robot:
  id: "UR5e"
  type: "Collaborative Robot"
  manufacturer: "Universal Robots"
  properties:
    payload_kg: 5.0
    reach_mm: 850
    dof: 6
    repeatability_mm: 0.03
  has_component: [ControlBox, RobotArm, TeachPendant]

# 조인트 엔티티
Joint:
  pattern: "Joint_{0-5}"
  properties:
    index: [0, 1, 2, 3, 4, 5]
    name: [Base, Shoulder, Elbow, Wrist1, Wrist2, Wrist3]
    max_torque_nm: [150, 150, 150, 28, 28, 28]
    max_speed_deg_s: [180, 180, 180, 360, 360, 360]
  part_of: RobotArm
  monitored_by: [JointSensor, Axia80]
```

## 10.3 에러 코드와의 관계 정의

```yaml
# 에러 코드 엔티티
ErrorCode:
  C153:
    name: "Safety System Violation"
    category: "safety"
    severity: "critical"
    symptoms:
      - "로봇 급정지"
      - "Safety LED 점멸"
    triggered_by:
      - SensorPattern.COLLISION (95%)
      - SensorPattern.POSITION_DEVIATION (70%)
    affects:
      - Component.SafetyControlBoard
      - Component.AllJoints
    resolved_by:
      - Resolution.CLEAR_OBSTRUCTION
      - Resolution.CHECK_PROGRAM_PATH
    documented_in:
      - "User_Manual#page145"
      - "Service_Manual#page67"

  C189:
    name: "Payload Exceeded"
    category: "overload"
    severity: "high"
    triggered_by:
      - SensorPattern.OVERLOAD (90%)
    threshold:
      max_payload_kg: 5.0
    resolved_by:
      - Resolution.REDUCE_PAYLOAD
      - Resolution.CHECK_TCP_SETTING
```

## 10.4 Axia80 ↔ UR5e ↔ 에러 연결

```
관계 그래프:

[Axia80]
    │
    ├── MOUNTED_ON ──→ [UR5e.ToolFlange]
    │
    ├── MEASURES ──→ [Fz, Fx, Fy, Tx, Ty, Tz]
    │                      │
    │                      ├── HAS_STATE ──→ [IDLE, NORMAL, OVERLOAD, COLLISION]
    │                      │                           │
    │                      │                           ├── INDICATES ──→ [Cause]
    │                      │                           │                    │
    │                      │                           │                    └── RESOLVED_BY ──→ [Resolution]
    │                      │                           │
    │                      │                           └── TRIGGERS ──→ [ErrorCode]
    │                      │                                                 │
    │                      │                                                 ├── C153
    │                      │                                                 ├── C189
    │                      │                                                 └── C119
    │                      │
    │                      └── AFFECTS ──→ [UR5e.Joint]
    │
    └── MONITORS ──→ [UR5e.OperationalState]
```

## 10.5 온톨로지가 답해야 할 질문들

| 질문 유형 | 예시 질문 | 필요한 관계 |
|----------|----------|------------|
| **상태 해석** | "Fz=-180N이 정상인가?" | Axis → State → Threshold |
| **원인 추론** | "왜 C153이 발생했나?" | Error ← Triggered_by ← Pattern |
| **영향 분석** | "이 상태가 계속되면?" | State → May_trigger → Error |
| **해결책** | "어떻게 해결하나?" | Error → Resolved_by → Resolution |
| **문서 참조** | "매뉴얼 어디를 봐야 하나?" | Error → Documented_in → Document |
| **이력 추적** | "이전에도 이런 적 있나?" | Pattern → Historical_occurrence |

---

# 참고 자료

## 공식 문서
- [UR5e User Manual](https://www.universal-robots.com/download/?option=101200)
- [e-Series Service Manual](https://www.universal-robots.com/download/?option=101201)
- [Error Codes Directory](https://www.universal-robots.com/download/?option=101202)

## 추가 학습
- [UR Academy](https://academy.universal-robots.com/) - 무료 온라인 교육
- [UR+ Ecosystem](https://www.universal-robots.com/plus/) - 호환 제품/소프트웨어
- [UR Forum](https://forum.universal-robots.com/) - 커뮤니티
