# ì‹œìŠ¤í…œ íŒŒì´í”„ë¼ì¸ ì•„í‚¤í…ì²˜

> **ë²„ì „**: v2.1 (ì‹¤ì œ êµ¬í˜„ ê¸°ì¤€)
> **ìµœì¢… ì—…ë°ì´íŠ¸**: 2025-01

---

## 0. PoC êµ¬í˜„ vs ëª©í‘œ ì•„í‚¤í…ì²˜

> âš ï¸ **ì¤‘ìš”**: ì´ ë¬¸ì„œëŠ” **í˜„ì¬ PoC êµ¬í˜„**ì„ ê¸°ì¤€ìœ¼ë¡œ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.
> ì„¤ê³„ ë‹¤ì´ì–´ê·¸ë¨ì— í‘œì‹œëœ ê¸°ìˆ  ìŠ¤íƒê³¼ ì‹¤ì œ êµ¬í˜„ì´ ë‹¤ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### Layer 3: ë°ì´í„° & í†µí•© ê³„ì¸µ ë¹„êµ

| êµ¬ì„±ìš”ì†Œ | ëª©í‘œ ì•„í‚¤í…ì²˜ (ì„¤ê³„) | í˜„ì¬ PoC êµ¬í˜„ | ë¹„ê³  |
|----------|---------------------|---------------|------|
| **ì„¼ì„œ ì‹œê³„ì—´ DB** | TimescaleDB / InfluxDB | Parquet íŒŒì¼ | `data/sensor/raw/*.parquet` |
| **ì˜¨í†¨ë¡œì§€ ê·¸ë˜í”„** | Neo4j / RDF Store | JSON + ì¸ë©”ëª¨ë¦¬ | `data/processed/ontology/ontology.json` |
| **ë²¡í„° ì €ì¥ì†Œ** | Milvus / Pinecone | ChromaDB | `stores/chroma/` (íŒŒì¼ ê¸°ë°˜) |
| **ë©”ì‹œì§€ í** | Kafka / RabbitMQ | ë¯¸êµ¬í˜„ | PoCëŠ” ì§ì ‘ í˜¸ì¶œ ë°©ì‹ |

### ì™œ ë‹¤ë¥¸ê°€?

**PoC ë‹¨ê³„ì˜ ì„¤ê³„ ì² í•™:**
- **ë¹ ë¥¸ í”„ë¡œí† íƒ€ì´í•‘**: íŒŒì¼ ê¸°ë°˜ ì €ì¥ì†Œë¡œ ì„¤ì¹˜/ì„¤ì • ì˜¤ë²„í—¤ë“œ ìµœì†Œí™”
- **ë‹¨ì¼ ë¨¸ì‹  ì‹¤í–‰**: ë¶„ì‚° ì‹œìŠ¤í…œ ì—†ì´ ë¡œì»¬ì—ì„œ ì™„ì „í•œ ë°ëª¨ ê°€ëŠ¥
- **ì˜ì¡´ì„± ìµœì†Œí™”**: Docker/ì™¸ë¶€ ì„œë¹„ìŠ¤ ì—†ì´ `pip install`ë§Œìœ¼ë¡œ ì‹¤í–‰

**í”„ë¡œë•ì…˜ ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹œ ê³ ë ¤ì‚¬í•­:**
- TimescaleDB: ëŒ€ìš©ëŸ‰ ì‹œê³„ì—´ ì¿¼ë¦¬ ì„±ëŠ¥ (í˜„ì¬ 7ì¼ â†’ ìˆ˜ë…„ê°„ ë°ì´í„°)
- Neo4j: ë³µì¡í•œ ê·¸ë˜í”„ ì¿¼ë¦¬, ì˜¨í†¨ë¡œì§€ í™•ì¥ì„±
- Milvus/Pinecone: ìˆ˜ë°±ë§Œ ë¬¸ì„œ ì„ë² ë”©, ë¶„ì‚° ê²€ìƒ‰
- Kafka: ì‹¤ì‹œê°„ ì´ë²¤íŠ¸ ìŠ¤íŠ¸ë¦¬ë°, ë©€í‹° ì»¨ìŠˆë¨¸

---

## 1. ì „ì²´ ì‹œìŠ¤í…œ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              Frontend (Next.js 16)                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  LiveView   â”‚  â”‚  GraphView  â”‚  â”‚ HistoryView â”‚  â”‚  ChatPanel  â”‚        â”‚
â”‚  â”‚ (ì‹¤ì‹œê°„)    â”‚  â”‚ (ì˜¨í†¨ë¡œì§€)  â”‚  â”‚  (ì´ë ¥)     â”‚  â”‚  (AI ì±—ë´‡)  â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚         â”‚                â”‚                â”‚                â”‚               â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                    â”‚                                        â”‚
â”‚                          React Query + Zustand                              â”‚
â”‚                                    â”‚                                        â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚              â”‚ SSE (ì‹¤ì‹œê°„)        â”‚ REST (í´ë§/ìš”ì²­)    â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚                     â”‚                     â”‚
               â–¼                     â–¼                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              Backend (FastAPI)                              â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                         API Routes (4ê°œ)                             â”‚   â”‚
â”‚  â”‚  /api/chat    /api/sensors/*    /api/ontology/*    /health         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                    â”‚                                        â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚         â”‚                          â”‚                          â”‚            â”‚
â”‚         â–¼                          â–¼                          â–¼            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚    RAG      â”‚          â”‚  Ontology   â”‚          â”‚   Sensor    â”‚        â”‚
â”‚  â”‚  Pipeline   â”‚          â”‚   Engine    â”‚          â”‚   Engine    â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. ë°±ì—”ë“œ íŒŒì´í”„ë¼ì¸

### 2.1 í•µì‹¬ ëª¨ë“ˆ êµ¬ì¡°

```
src/
â”œâ”€â”€ api/                           # FastAPI ë¼ìš°í„°
â”‚   â”œâ”€â”€ main.py                    # ì•± ì§„ì…ì , ì‹±ê¸€í†¤ ì´ˆê¸°í™”
â”‚   â””â”€â”€ routes/
â”‚       â”œâ”€â”€ chat.py                # POST /api/chat (ë©”ì¸ ì±—ë´‡)
â”‚       â”œâ”€â”€ sensor.py              # GET /api/sensors/* (ì„¼ì„œ ë°ì´í„°)
â”‚       â”œâ”€â”€ ontology.py            # GET /api/ontology/* (ê·¸ë˜í”„ íƒìƒ‰)
â”‚       â””â”€â”€ system.py              # GET /health (í—¬ìŠ¤ì²´í¬)
â”‚
â”œâ”€â”€ rag/                           # RAG íŒŒì´í”„ë¼ì¸ (2,400+ ì¤„)
â”‚   â”œâ”€â”€ query_classifier.py        # ì§ˆë¬¸ ë¶„ë¥˜ (406ì¤„)
â”‚   â”œâ”€â”€ entity_extractor.py        # ì—”í‹°í‹° ì¶”ì¶œ (599ì¤„)
â”‚   â”œâ”€â”€ hybrid_retriever.py        # í•˜ì´ë¸Œë¦¬ë“œ ê²€ìƒ‰ (400ì¤„)
â”‚   â”œâ”€â”€ confidence_gate.py         # ì‹ ë¢°ë„ ê²Œì´íŠ¸ (245ì¤„)
â”‚   â”œâ”€â”€ response_generator.py      # ì‘ë‹µ ìƒì„± (920ì¤„)
â”‚   â””â”€â”€ prompt_builder.py          # í”„ë¡¬í”„íŠ¸ êµ¬ì„± (220ì¤„)
â”‚
â”œâ”€â”€ ontology/                      # ì˜¨í†¨ë¡œì§€ ì—”ì§„ (3,800+ ì¤„)
â”‚   â”œâ”€â”€ ontology_engine.py         # ì¶”ë¡  ì—”ì§„ (1,940ì¤„)
â”‚   â”œâ”€â”€ rule_engine.py             # ê·œì¹™ ì—”ì§„ (960ì¤„)
â”‚   â”œâ”€â”€ graph_traverser.py         # ê·¸ë˜í”„ íƒìƒ‰ (599ì¤„)
â”‚   â””â”€â”€ loader.py                  # ì˜¨í†¨ë¡œì§€ ë¡œë” (216ì¤„)
â”‚
â”œâ”€â”€ sensor/                        # ì„¼ì„œ ì²˜ë¦¬
â”‚   â”œâ”€â”€ sensor_store.py            # ì‹œê³„ì—´ ì €ì¥ì†Œ
â”‚   â”œâ”€â”€ pattern_detector.py        # íŒ¨í„´ ê°ì§€
â”‚   â””â”€â”€ correlation_engine.py      # ì´ê¸°ì¢… ìƒê´€ë¶„ì„
â”‚
â””â”€â”€ embedding/                     # ë²¡í„° ê²€ìƒ‰
    â”œâ”€â”€ vector_store.py            # ChromaDB (400ì¤„)
    â”œâ”€â”€ embedder.py                # OpenAI ì„ë² ë”© (163ì¤„)
    â””â”€â”€ reranker.py                # Cross-Encoder (241ì¤„)
```

### 2.2 ì±„íŒ… íŒŒì´í”„ë¼ì¸ (POST /api/chat)

```mermaid
flowchart TB
    subgraph Input["ğŸ“¥ ì…ë ¥"]
        Q["ì‚¬ìš©ì ì§ˆë¬¸<br/>'Fzê°€ -350Nì¸ë°?'"]
        CTX["ì»¨í…ìŠ¤íŠ¸<br/>{shift, product, entity}"]
    end

    subgraph Classification["1ï¸âƒ£ ì§ˆë¬¸ ë¶„ë¥˜ (QueryClassifier)"]
        QC["íŒ¨í„´ ë§¤ì¹­<br/>+ ì—”í‹°í‹° ì¶”ì¶œ"]
        QC --> TYPE{"ì§ˆë¬¸ ìœ í˜•"}
        TYPE -->|ì„¼ì„œê°’/íŒ¨í„´/ì •ì˜| ONT["ONTOLOGY"]
        TYPE -->|ì—ëŸ¬+í•´ê²°| HYB["HYBRID"]
        TYPE -->|ë¬¸ì„œ ì§ˆì˜| RAG["RAG"]
    end

    subgraph Parallel["2ï¸âƒ£ ë³‘ë ¬ ì²˜ë¦¬"]
        direction LR
        subgraph Retrieval["ë¬¸ì„œ ê²€ìƒ‰"]
            VS["VectorStore<br/>(Bi-encoder)"]
            RR["Reranker<br/>(Cross-encoder)"]
            VS --> RR
        end
        subgraph Reasoning["ì˜¨í†¨ë¡œì§€ ì¶”ë¡ "]
            OE["OntologyEngine"]
            RE["RuleEngine"]
            GT["GraphTraverser"]
            OE --> RE --> GT
        end
    end

    subgraph Gate["3ï¸âƒ£ ì‹ ë¢°ë„ ê²€ì¦ (ConfidenceGate)"]
        CG["ì—”í‹°í‹° ì¡´ì¬?<br/>ë¶„ë¥˜ ì‹ ë¢°ë„ > 0.3?<br/>ì¶”ë¡  ì‹ ë¢°ë„ > 0.5?"]
        CG -->|PASS| GEN
        CG -->|FAIL| ABS["ABSTAIN ì‘ë‹µ"]
    end

    subgraph Generation["4ï¸âƒ£ ì‘ë‹µ ìƒì„± (ResponseGenerator)"]
        GEN["ë¶„ì„ + ì¶”ë¡  + ì˜ˆì¸¡<br/>+ ê¶Œì¥ì‚¬í•­ + ê·¼ê±°"]
    end

    subgraph Output["ğŸ“¤ ì¶œë ¥"]
        RES["ChatResponse<br/>+ trace_id"]
        STORE["Evidence Store<br/>(trace_id ë§¤í•‘)"]
    end

    Q --> QC
    CTX --> QC
    QC --> Parallel
    Retrieval --> Gate
    Reasoning --> Gate
    GEN --> RES
    RES --> STORE
```

### 2.3 ì§ˆë¬¸ ë¶„ë¥˜ ìƒì„¸ (QueryClassifier)

| ì§ˆë¬¸ ìœ í˜• | íŠ¸ë¦¬ê±° ì¡°ê±´ | ê°€ì¤‘ì¹˜ | ì˜ˆì‹œ |
|----------|------------|--------|------|
| **ONTOLOGY** | ì„¼ì„œì¶• + ìˆ˜ì¹˜ê°’ | 0.9 | "Fzê°€ -350Nì¸ë° ë­ì•¼?" |
| | íŒ¨í„´/ìƒíƒœ ì§ˆë¬¸ | 0.85 | "ì¶©ëŒ íŒ¨í„´ì´ ë­ì•¼?" |
| | ì—”í‹°í‹° ì •ì˜ | 0.8 | "Fzê°€ ë­ì•¼?" |
| | ì‹œê°„ ë§¥ë½ | 0.75 | "ìµœê·¼ ì¶©ëŒ ìˆì–´?" |
| **HYBRID** | ì—ëŸ¬ì½”ë“œ + í•´ê²° | 0.8 | "C153 í•´ê²° ë°©ë²•?" |
| | ì—ëŸ¬ ì›ì¸ | 0.75 | "C153 ì™œ ë‚˜ì™€?" |
| **RAG** | ì‚¬ì–‘/ì ˆì°¨ | 0.8 | "UR5e í˜ì´ë¡œë“œ?" |
| | ì¼ë°˜ ë¬¸ì„œ | 0.6 | "ì„¤ì¹˜ ë°©ë²•?" |

**ë¶„ë¥˜ ì•Œê³ ë¦¬ì¦˜:**
```python
# 1. ì§€í‘œ ì ìˆ˜ ê³„ì‚°
ontology_score = Î£(matched_indicator.weight)  # ìµœëŒ€ 1.0
hybrid_score = Î£(matched_indicator.weight)
rag_score = Î£(matched_indicator.weight)

# 2. ì—”í‹°í‹° ë³´ì • (+ìµœëŒ€ 0.5)
if MeasurementAxis + Value: ontology_score += 0.3
if Pattern: ontology_score += 0.2
if TimeExpression: ontology_score += 0.15

# 3. ìµœì¢… ë¶„ë¥˜
query_type = argmax(ontology_score, hybrid_score, rag_score)
if max_score < 0.3: query_type = RAG  # í´ë°±
```

### 2.4 ì˜¨í†¨ë¡œì§€ ì¶”ë¡  ìƒì„¸ (OntologyEngine)

```mermaid
flowchart LR
    subgraph Input["ì…ë ¥"]
        ENT["ì—”í‹°í‹°: Fz<br/>ê°’: -350N"]
    end

    subgraph Context["1. ì»¨í…ìŠ¤íŠ¸ ë¡œë”©"]
        EC["EntityContext<br/>- properties<br/>- states<br/>- patterns<br/>- errors"]
    end

    subgraph Rules["2. ê·œì¹™ ì¶”ë¡  (RuleEngine)"]
        R1["ìƒíƒœ ì¶”ë¡ <br/>-350 < -50 â†’ Critical"]
        R2["íŒ¨í„´ ë¶„ì„<br/>Critical â†’ PAT_OVERLOAD"]
        R3["ì›ì¸ ì¶”ë¡ <br/>â†’ CAUSE_PAYLOAD"]
        R4["ì˜ˆì¸¡<br/>â†’ C189 (0.9)"]
        R1 --> R2 --> R3 --> R4
    end

    subgraph Graph["3. ê²½ë¡œ ì¶”ì¶œ (GraphTraverser)"]
        BFS["BFS íƒìƒ‰"]
        PATH["Fz â†’ Critical<br/>â†’ PAT_OVERLOAD<br/>â†’ C189"]
    end

    subgraph Output["ì¶œë ¥"]
        RR["ReasoningResult<br/>- conclusions<br/>- predictions<br/>- ontology_paths<br/>- confidence: 0.92"]
    end

    ENT --> EC --> R1
    R4 --> BFS --> PATH --> RR
```

### 2.5 ì‹ ë¢°ë„ ê²Œì´íŠ¸ (ConfidenceGate)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ì‹ ë¢°ë„ ë‹¤ì¸µ ê²€ì¦                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  Level 1: ì—”í‹°í‹° ì¶”ì¶œ                                       â”‚
â”‚  â”œâ”€ ì²´í¬: classification.entities ì¡´ì¬?                    â”‚
â”‚  â””â”€ ì‹¤íŒ¨ ì‹œ: "êµ¬ì²´ì ì¸ ì„¼ì„œ/ì—ëŸ¬ì½”ë“œë¥¼ í¬í•¨í•´ì£¼ì„¸ìš”"        â”‚
â”‚                                                             â”‚
â”‚  Level 2: ë¶„ë¥˜ ì‹ ë¢°ë„                                       â”‚
â”‚  â”œâ”€ ì²´í¬: classification.confidence >= 0.3                 â”‚
â”‚  â””â”€ ì‹¤íŒ¨ ì‹œ: "ì§ˆë¬¸ì„ ë” ëª…í™•í•˜ê²Œ í‘œí˜„í•´ì£¼ì„¸ìš”"              â”‚
â”‚                                                             â”‚
â”‚  Level 3: ì¶”ë¡  ê²°ê³¼                                         â”‚
â”‚  â”œâ”€ ì²´í¬: reasoning.conclusions ì¡´ì¬?                      â”‚
â”‚  â””â”€ ì‹¤íŒ¨ ì‹œ: "ì˜¨í†¨ë¡œì§€ì— ë“±ë¡ë˜ì§€ ì•Šì€ í•­ëª©ì…ë‹ˆë‹¤"          â”‚
â”‚                                                             â”‚
â”‚  Level 4: ì¶”ë¡  ì‹ ë¢°ë„                                       â”‚
â”‚  â”œâ”€ ì²´í¬: reasoning.confidence >= 0.5                      â”‚
â”‚  â””â”€ ì‹¤íŒ¨ ì‹œ: "ì¶”ê°€ ì •ë³´ë¥¼ ì œê³µí•´ì£¼ì„¸ìš”"                     â”‚
â”‚                                                             â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚  ëª¨ë‘ í†µê³¼ â†’ PASS (ì •ìƒ ì‘ë‹µ ìƒì„±)                          â”‚
â”‚  í•˜ë‚˜ë¼ë„ ì‹¤íŒ¨ â†’ ABSTAIN (ì‘ë‹µ ê±°ë¶€ + ê°€ì´ë“œ ì œê³µ)          â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.6 ì‘ë‹µ êµ¬ì¡° (ChatResponse)

```typescript
interface ChatResponse {
  // ë©”íƒ€
  trace_id: string;           // ì¶”ì ìš© UUID
  query_type: 'ontology' | 'hybrid' | 'rag';
  abstain: boolean;           // ì‘ë‹µ ê±°ë¶€ ì—¬ë¶€
  abstain_reason?: string;

  // í•µì‹¬ ì‘ë‹µ
  answer: string;             // ìì—°ì–´ ì‘ë‹µ

  // ë¶„ì„ ê²°ê³¼
  analysis: {
    entity: string;           // "Fz"
    value: number;            // -350.0
    unit: string;             // "N"
    state: string;            // "State_Critical"
    normal_range: [number, number];
    deviation: string;        // "ì •ìƒ ëŒ€ë¹„ ì•½ 7ë°°"
  };

  // ì¶”ë¡  ê²°ê³¼
  reasoning: {
    confidence: number;       // 0.92
    pattern: string;          // "PAT_OVERLOAD"
    pattern_confidence: number;
    cause: string;            // "CAUSE_PAYLOAD_EXCEEDED"
    cause_confidence: number;
  };

  // ì˜ˆì¸¡
  prediction: {
    error_code: string;       // "C189"
    probability: number;      // 0.9
    timeframe: string;        // "ìˆ˜ë¶„ ë‚´"
  };

  // ê¶Œì¥ì‚¬í•­
  recommendation: {
    immediate: string;
    steps: string[];
  };

  // ê·¼ê±°
  evidence: {
    ontology_paths: OntologyPath[];
    document_refs: DocumentRef[];
  };

  // ì‹œê°í™”ìš© ê·¸ë˜í”„
  graph: {
    nodes: GraphNode[];
    edges: GraphEdge[];
  };
}
```

---

## 3. í”„ë¡ íŠ¸ì—”ë“œ íŒŒì´í”„ë¼ì¸

### 3.1 ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°

```
frontend/src/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ layout.tsx              # Root (Providers ì´ˆê¸°í™”)
â”‚   â””â”€â”€ page.tsx                # ë©”ì¸ í˜ì´ì§€
â”‚
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ layout/
â”‚   â”‚   â”œâ”€â”€ Header.tsx          # ë„¤ë¹„ê²Œì´ì…˜
â”‚   â”‚   â””â”€â”€ SplitView.tsx       # ë°˜ì‘í˜• ë ˆì´ì•„ì›ƒ
â”‚   â”‚
â”‚   â”œâ”€â”€ live/                   # ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§
â”‚   â”‚   â”œâ”€â”€ LiveView.tsx        # ë©”ì¸ ì»¨í…Œì´ë„ˆ
â”‚   â”‚   â”œâ”€â”€ RiskAlertBar.tsx    # ìœ„í—˜ ê²½ê³ 
â”‚   â”‚   â”œâ”€â”€ ObjectCard.tsx      # ì„¼ì„œ ì¹´ë“œ
â”‚   â”‚   â”œâ”€â”€ RealtimeChart.tsx   # ì‹¤ì‹œê°„ ì°¨íŠ¸
â”‚   â”‚   â””â”€â”€ CorrelationTable.tsx # ìƒê´€ë¶„ì„
â”‚   â”‚
â”‚   â”œâ”€â”€ graph/                  # ì˜¨í†¨ë¡œì§€ íƒìƒ‰
â”‚   â”‚   â”œâ”€â”€ GraphView.tsx       # ê·¸ë˜í”„ ë·°
â”‚   â”‚   â””â”€â”€ SubGraph.tsx        # React Flow ë Œë”ë§
â”‚   â”‚
â”‚   â”œâ”€â”€ chat/                   # AI ì–´ì‹œìŠ¤í„´íŠ¸
â”‚   â”‚   â””â”€â”€ ChatPanel.tsx       # ì±„íŒ… UI
â”‚   â”‚
â”‚   â””â”€â”€ evidence/
â”‚       â””â”€â”€ EvidenceDrawer.tsx  # ê·¼ê±° ìƒì„¸
â”‚
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useApi.ts               # React Query í›…
â”‚   â”œâ”€â”€ useSSE.ts               # SSE ìŠ¤íŠ¸ë¦¬ë°
â”‚   â””â”€â”€ useAnomalyAlert.ts      # ì´ìƒ ê°ì§€
â”‚
â”œâ”€â”€ stores/                     # Zustand ìƒíƒœ
â”‚   â”œâ”€â”€ uiStore.ts              # UI ìƒíƒœ
â”‚   â”œâ”€â”€ chatStore.ts            # ì±„íŒ… íˆìŠ¤í† ë¦¬
â”‚   â”œâ”€â”€ alertStore.ts           # ì•Œë¦¼/ì´ë²¤íŠ¸
â”‚   â””â”€â”€ apiKeyStore.ts          # API í‚¤
â”‚
â””â”€â”€ lib/
    â””â”€â”€ api.ts                  # API í´ë¼ì´ì–¸íŠ¸
```

### 3.2 ë°ì´í„° íë¦„

```mermaid
flowchart TB
    subgraph Backend["Backend API"]
        SSE1["/api/sensors/stream"]
        SSE2["/api/sensors/stream/integrated"]
        REST1["GET /api/sensors/*"]
        REST2["GET /api/ontology/*"]
        REST3["POST /api/chat"]
    end

    subgraph Hooks["Custom Hooks"]
        H1["useSensorSSE()"]
        H2["useIntegratedSSE()"]
        H3["useSensorReadings()"]
        H4["useOntologyGraph()"]
        H5["useChatMutation()"]
    end

    subgraph Stores["Zustand Stores"]
        S1["uiStore<br/>(ë·°, ì„ íƒ ì—”í‹°í‹°)"]
        S2["alertStore<br/>(ì´ë²¤íŠ¸, ì•Œë¦¼)"]
        S3["chatStore<br/>(ë©”ì‹œì§€ íˆìŠ¤í† ë¦¬)"]
    end

    subgraph Components["React Components"]
        C1["LiveView"]
        C2["GraphView"]
        C3["ChatPanel"]
    end

    SSE1 --> H1 --> C1
    SSE2 --> H2 --> C1
    REST1 --> H3 --> C1
    REST2 --> H4 --> C2
    REST3 --> H5 --> C3

    H2 --> S2
    C1 --> S1
    C3 --> S3
```

### 3.3 ì‹¤ì‹œê°„ ë°ì´í„° íë¦„ (LiveView)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ì‹¤ì‹œê°„ ì„¼ì„œ ëª¨ë‹ˆí„°ë§                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  1. SSE ìŠ¤íŠ¸ë¦¼ ìˆ˜ì‹                                              â”‚
â”‚     /api/sensors/stream/integrated (0.5ì´ˆ ê°„ê²©)                â”‚
â”‚     â†“                                                          â”‚
â”‚     useIntegratedSSE()                                         â”‚
â”‚     â†“                                                          â”‚
â”‚     IntegratedStreamData {                                     â”‚
â”‚       scenario: { current: 'collision' }                       â”‚
â”‚       axia80: { Fz: -450, force_spike: true }                 â”‚
â”‚       ur5e: { tcp_speed: 0.05 }                               â”‚
â”‚       risk: { risk_level: 'critical' }                        â”‚
â”‚     }                                                          â”‚
â”‚                                                                 â”‚
â”‚  2. ì´ìƒ ê°ì§€                                                   â”‚
â”‚     useAnomalyAlert(latestData)                                â”‚
â”‚     â†“                                                          â”‚
â”‚     ì‹œë‚˜ë¦¬ì˜¤ ë³€ê²½ ê°ì§€: normal â†’ collision                      â”‚
â”‚     â†“                                                          â”‚
â”‚     â”œâ”€ alertStore.addEvent(event)                             â”‚
â”‚     â”œâ”€ toast.error("ì¶©ëŒ ê°ì§€!")                               â”‚
â”‚     â””â”€ playAlert('critical')                                  â”‚
â”‚                                                                 â”‚
â”‚  3. UI ì—…ë°ì´íŠ¸                                                 â”‚
â”‚     â”œâ”€ RiskAlertBar: critical ìƒíƒœ í‘œì‹œ                        â”‚
â”‚     â”œâ”€ ObjectCard: Fz ì¹´ë“œ ë¹¨ê°„ìƒ‰                              â”‚
â”‚     â”œâ”€ RealtimeChart: ê·¸ë˜í”„ ì—…ë°ì´íŠ¸                          â”‚
â”‚     â””â”€ EventDetectionCard: ì¶©ëŒ ì´ë²¤íŠ¸ í‘œì‹œ                    â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.4 ì±„íŒ… ë°ì´í„° íë¦„ (ChatPanel)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        AI ì–´ì‹œìŠ¤í„´íŠ¸                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  1. ì‚¬ìš©ì ì…ë ¥                                                 â”‚
â”‚     "Fzê°€ -350Nì¸ë° ì´ê²Œ ë­ì•¼?"                                â”‚
â”‚     + ì»¨í…ìŠ¤íŠ¸ { selectedEntity: 'Fz', currentView: 'live' }  â”‚
â”‚                                                                 â”‚
â”‚  2. API í˜¸ì¶œ                                                    â”‚
â”‚     useChatMutation()                                          â”‚
â”‚     POST /api/chat                                             â”‚
â”‚     Header: X-OpenAI-API-Key: <user_api_key>                  â”‚
â”‚                                                                 â”‚
â”‚  3. ì‘ë‹µ ì²˜ë¦¬                                                   â”‚
â”‚     normalizeChatResponse(raw)  // snake_case â†’ camelCase     â”‚
â”‚     â†“                                                          â”‚
â”‚     chatStore.addMessage({                                     â”‚
â”‚       role: 'assistant',                                       â”‚
â”‚       content: answer,                                         â”‚
â”‚       response: ChatResponse                                   â”‚
â”‚     })                                                          â”‚
â”‚                                                                 â”‚
â”‚  4. UI ë Œë”ë§                                                   â”‚
â”‚     â”œâ”€ MessageBubble: ì‘ë‹µ í…ìŠ¤íŠ¸                              â”‚
â”‚     â”œâ”€ ResponseMeta: ìœ í˜•, ì‹ ë¢°ë„                              â”‚
â”‚     â”œâ”€ EvidenceToggle: ê·¼ê±° í¼ì¹˜ê¸°                             â”‚
â”‚     â””â”€ Graph ë Œë”ë§ (ê´€ë ¨ ë…¸ë“œ/ì—£ì§€)                           â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. ì´ê¸°ì¢… ìƒê´€ë¶„ì„ íŒŒì´í”„ë¼ì¸

### 4.1 ë°ì´í„° í†µí•© íë¦„

```mermaid
flowchart LR
    subgraph Raw["ì›ì‹œ ë°ì´í„°"]
        A["Axia80<br/>Fx, Fy, Fz, Tx, Ty, Tz"]
        U["UR5e (í•©ì„±)<br/>tcp_speed, torque"]
    end

    subgraph Derived["íŒŒìƒ ì§€í‘œ"]
        FM["force_magnitude<br/>sqrt(FxÂ²+FyÂ²+FzÂ²)"]
        FR["force_rate<br/>d|F|/dt"]
        TFR["torque_force_ratio"]
    end

    subgraph Risk["ìœ„í—˜ë„ ê³„ì‚°"]
        CRS["contact_risk<br/>0~1"]
        COLS["collision_risk<br/>0~1"]
        AD["anomaly_detected"]
    end

    subgraph Action["ê¶Œì¥ ì¡°ì¹˜"]
        RA["recommended_action<br/>maintain/slow_down/stop"]
    end

    A --> FM --> CRS
    A --> FR --> COLS
    A --> TFR
    U --> TFR --> AD
    CRS --> RA
    COLS --> RA
    AD --> RA
```

### 4.2 ì‹œë‚˜ë¦¬ì˜¤ë³„ íŠ¹ì„±

| ì‹œë‚˜ë¦¬ì˜¤ | Fz ë²”ìœ„ | tcp_speed | ìœ„í—˜ë„ | íŠ¸ë¦¬ê±° ì¡°ê±´ |
|----------|---------|-----------|--------|-------------|
| `normal` | -30 ~ -10N | 0.2~0.4 m/s | 0.1~0.2 | ê¸°ë³¸ ìƒíƒœ |
| `high_force` | -80 ~ -50N | 0.3~0.5 m/s | 0.4~0.6 | \|Fz\| > 50N |
| `contact` | -150 ~ -80N | 0.1~0.3 m/s | 0.6~0.8 | \|Fz\| > 80N |
| `collision` | -350 ~ -200N | 0~0.1 m/s | 0.8~1.0 | Fz < -200N (ê¸‰ë½) |
| `overload` | -150N+ (ì§€ì†) | ìœ ì§€ | 0.7~0.9 | 5ì´ˆ ì´ìƒ ì§€ì† |
| `wear` | ë“œë¦¬í”„íŠ¸ | ìœ ì§€ | 0.5~0.7 | baseline 10%+ |

---

## 5. API ì—”ë“œí¬ì¸íŠ¸ ìš”ì•½

### 5.1 ì±„íŒ… API

| ì—”ë“œí¬ì¸íŠ¸ | ë©”ì„œë“œ | ì„¤ëª… |
|-----------|--------|------|
| `/api/chat` | POST | ë©”ì¸ ì±—ë´‡ (RAG + ì˜¨í†¨ë¡œì§€) |
| `/api/evidence/{trace_id}` | GET | ê·¼ê±° ìƒì„¸ ì¡°íšŒ |

### 5.2 ì„¼ì„œ API

| ì—”ë“œí¬ì¸íŠ¸ | ë©”ì„œë“œ | ì„¤ëª… |
|-----------|--------|------|
| `/api/sensors/readings` | GET | ì„¼ì„œê°’ (í´ë§) |
| `/api/sensors/events` | GET | ê°ì§€ ì´ë²¤íŠ¸ |
| `/api/sensors/patterns` | GET | íŒ¨í„´ ë¶„ì„ |
| `/api/sensors/predictions` | GET | ì˜ˆì¸¡ ë°ì´í„° |
| `/api/sensors/stream` | GET | SSE ì„¼ì„œ ìŠ¤íŠ¸ë¦¼ |
| `/api/sensors/stream/integrated` | GET | SSE í†µí•© ìŠ¤íŠ¸ë¦¼ |

### 5.3 ì˜¨í†¨ë¡œì§€ API

| ì—”ë“œí¬ì¸íŠ¸ | ë©”ì„œë“œ | ì„¤ëª… |
|-----------|--------|------|
| `/api/ontology/entities` | GET | ì „ì²´ ì—”í‹°í‹° (199ê°œ) |
| `/api/ontology/entity/{id}` | GET | ì—”í‹°í‹° ìƒì„¸ |
| `/api/ontology/neighbors/{id}` | GET | ì´ì›ƒ ë…¸ë“œ |
| `/api/ontology/graph` | GET | ì„œë¸Œê·¸ë˜í”„ |

### 5.4 ì‹œìŠ¤í…œ API

| ì—”ë“œí¬ì¸íŠ¸ | ë©”ì„œë“œ | ì„¤ëª… |
|-----------|--------|------|
| `/health` | GET | í—¬ìŠ¤ì²´í¬ |
| `/api/ontology/summary` | GET | ì˜¨í†¨ë¡œì§€ ìš”ì•½ |

---

## 6. ì„±ëŠ¥ íŠ¹ì„±

### 6.1 ì‘ë‹µ ì‹œê°„ (ì±„íŒ… API)

| ë‹¨ê³„ | ì†Œìš” ì‹œê°„ | ë¹„ê³  |
|------|----------|------|
| ì§ˆë¬¸ ë¶„ë¥˜ | ~10ms | íŒ¨í„´ ë§¤ì¹­ |
| ë¬¸ì„œ ê²€ìƒ‰ (VectorStore) | ~100ms | Bi-encoder |
| ë¦¬ë­í‚¹ (Cross-encoder) | ~100ms | Top-20 â†’ Top-5 |
| ì˜¨í†¨ë¡œì§€ ì¶”ë¡  | ~50ms | ê·¸ë˜í”„ íƒìƒ‰ |
| ì‘ë‹µ ìƒì„± | ~30ms | í…œí”Œë¦¿ ì¡°í•© |
| **ì´í•©** | **~200-290ms** | ë³‘ë ¬ ì²˜ë¦¬ ì‹œ |

### 6.2 ìµœì í™” ê¸°ë²•

- **ë³‘ë ¬ ì²˜ë¦¬**: ë¬¸ì„œ ê²€ìƒ‰ + ì˜¨í†¨ë¡œì§€ ì¶”ë¡  ë™ì‹œ ì‹¤í–‰ (40% ê°œì„ )
- **ì‹±ê¸€í†¤ ìºì‹±**: ëª¨ë¸ ì¬ë¡œë”© ë°©ì§€ (VectorStore, OntologyEngine)
- **ì„ íƒì  ê²€ìƒ‰**: ONTOLOGY ì§ˆë¬¸ì€ Top-3ë§Œ ê²€ìƒ‰
- **SSE ë²„í¼ ê´€ë¦¬**: ìµœì‹  60ê°œë§Œ ìœ ì§€

---

## 7. ê¸°ìˆ  ìŠ¤íƒ

### Backend (PoC êµ¬í˜„)

| ê¸°ìˆ  | ìš©ë„ | í”„ë¡œë•ì…˜ ëŒ€ì•ˆ |
|------|------|--------------|
| FastAPI | REST API ì„œë²„ | ë™ì¼ (ìŠ¤ì¼€ì¼ì•„ì›ƒ) |
| **ChromaDB** | ë²¡í„° ë°ì´í„°ë² ì´ìŠ¤ | Milvus / Pinecone |
| **Parquet** | ì„¼ì„œ ì‹œê³„ì—´ ì €ì¥ | TimescaleDB / InfluxDB |
| **JSON íŒŒì¼** | ì˜¨í†¨ë¡œì§€ ê·¸ë˜í”„ | Neo4j / RDF Store |
| OpenAI API | ì„ë² ë”© + ì¶”ë¡  | ë™ì¼ ë˜ëŠ” Self-hosted |
| Cross-Encoder | ë¦¬ë­í‚¹ | ë™ì¼ (GPU ê°€ì†) |

### Frontend

| ê¸°ìˆ  | ìš©ë„ |
|------|------|
| Next.js 16 | React í”„ë ˆì„ì›Œí¬ |
| React Query | ì„œë²„ ìƒíƒœ ê´€ë¦¬ |
| Zustand | í´ë¼ì´ì–¸íŠ¸ ìƒíƒœ |
| React Flow | ê·¸ë˜í”„ ë Œë”ë§ |
| Recharts | ì°¨íŠ¸ |
| SSE | ì‹¤ì‹œê°„ ìŠ¤íŠ¸ë¦¬ë° |

### ë°ì´í„° ì €ì¥ì†Œ ìƒì„¸

```
í˜„ì¬ PoC íŒŒì¼ êµ¬ì¡°:

stores/
â””â”€â”€ chroma/                    # ChromaDB (ë²¡í„°)
    â”œâ”€â”€ chroma.sqlite3
    â””â”€â”€ collections/

data/
â”œâ”€â”€ sensor/
â”‚   â””â”€â”€ raw/
â”‚       â””â”€â”€ axia80_week_01.parquet   # ì„¼ì„œ ì‹œê³„ì—´ (7ì¼)
â”‚
â””â”€â”€ processed/
    â””â”€â”€ ontology/
        â””â”€â”€ ontology.json            # ì˜¨í†¨ë¡œì§€ ê·¸ë˜í”„ (199 ì—”í‹°í‹°)
```

---

## 8. íŒŒì¼ ê²½ë¡œ ìš”ì•½

```
c:\Users\nugikim\Desktop\ur5e-ontology-rag\
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ api/main.py                    # ì•± ì§„ì…ì 
â”‚   â”œâ”€â”€ api/routes/chat.py             # ì±„íŒ… API
â”‚   â”œâ”€â”€ rag/query_classifier.py        # ì§ˆë¬¸ ë¶„ë¥˜
â”‚   â”œâ”€â”€ rag/response_generator.py      # ì‘ë‹µ ìƒì„±
â”‚   â”œâ”€â”€ rag/hybrid_retriever.py        # í•˜ì´ë¸Œë¦¬ë“œ ê²€ìƒ‰
â”‚   â”œâ”€â”€ ontology/ontology_engine.py    # ì˜¨í†¨ë¡œì§€ ì¶”ë¡ 
â”‚   â””â”€â”€ ontology/rule_engine.py        # ê·œì¹™ ì—”ì§„
â”‚
â”œâ”€â”€ frontend/src/
â”‚   â”œâ”€â”€ app/page.tsx                   # ë©”ì¸ í˜ì´ì§€
â”‚   â”œâ”€â”€ components/live/LiveView.tsx   # ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§
â”‚   â”œâ”€â”€ components/chat/ChatPanel.tsx  # AI ì–´ì‹œìŠ¤í„´íŠ¸
â”‚   â”œâ”€â”€ hooks/useApi.ts                # API í›…
â”‚   â””â”€â”€ hooks/useSSE.ts                # SSE í›…
â”‚
â”œâ”€â”€ data/processed/ontology/
â”‚   â””â”€â”€ ontology.json                  # ì˜¨í†¨ë¡œì§€ (199 ì—”í‹°í‹°)
â”‚
â””â”€â”€ configs/
    â”œâ”€â”€ inference_rules.yaml           # ì¶”ë¡  ê·œì¹™
    â””â”€â”€ pattern_thresholds.yaml        # íŒ¨í„´ ì„ê³„ê°’
```
