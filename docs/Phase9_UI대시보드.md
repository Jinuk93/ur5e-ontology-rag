# Phase 9: UI 대시보드 (Streamlit)

> **목표:** 종합 RAG 시스템 대시보드 구축
>
> **핵심 학습:** Streamlit, 데이터 시각화, LLMOps 모니터링
>
> **난이도:** ★★★★☆

---

## 1. 설계 목표

### 1.1 핵심 요구사항

| 영역 | 요구사항 | JD 연관 |
|------|---------|---------|
| **지식 시각화** | 온톨로지/지식그래프 시각화 | 지식그래프·도메인 온톨로지 설계 |
| **파이프라인 모니터링** | Multi-Agent 흐름 시각화 | Multi-Agent 구성 |
| **성능 평가** | 정확도/Latency/비용 스코어 | Hallucination·Latency·Cost 최적화 |
| **비교 분석** | Phase별/전략별 성능 비교 | RAG·Tool Calling·Workflow 설계 |
| **데이터 파이프라인** | 이기종 데이터 흐름 시각화 | 이기종 데이터 파이프라인 구축 |
| **LLMOps** | 토큰/비용/호출 모니터링 | LLMOps 운영 |

### 1.2 대시보드 구성 (6개 페이지)

```
┌─────────────────────────────────────────────────────────────────┐
│                    UR5e RAG Dashboard                            │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  📊 Overview          │  시스템 상태, 핵심 KPI, 요약 통계        │
│  💬 RAG Query         │  대화형 질의 인터페이스                   │
│  🔍 Search Explorer   │  검색 결과 탐색 및 비교                   │
│  🕸️ Knowledge Graph   │  온톨로지 시각화, 관계 탐색               │
│  📈 Performance       │  성능 평가, Phase 비교, 벤치마크          │
│  🔧 LLMOps Monitor    │  토큰 사용량, 비용, 지연시간 추적         │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

---

## 2. 페이지별 상세 설계

### 2.1 📊 Overview (대시보드 홈)

**목적:** 시스템 전체 상태를 한눈에 파악

```
┌─────────────────────────────────────────────────────────────────┐
│  📊 UR5e RAG System Overview                                     │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐           │
│  │   System     │  │   Today's    │  │   Average    │           │
│  │   Status     │  │   Queries    │  │   Latency    │           │
│  │   ✅ Online  │  │     127      │  │    3.2s      │           │
│  └──────────────┘  └──────────────┘  └──────────────┘           │
│                                                                  │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐           │
│  │  Verification│  │   Token      │  │   Today's    │           │
│  │   Rate       │  │   Usage      │  │   Cost       │           │
│  │    78%       │  │   45.2K      │  │   $0.12      │           │
│  └──────────────┘  └──────────────┘  └──────────────┘           │
│                                                                  │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │  System Architecture                                     │    │
│  │  ┌─────┐   ┌─────────┐   ┌─────────┐   ┌─────────┐     │    │
│  │  │Query│ → │Analyzer │ → │Retriever│ → │Verifier │ → 📝│    │
│  │  └─────┘   └─────────┘   └─────────┘   └─────────┘     │    │
│  │              ↓               ↓                          │    │
│  │         ┌─────────┐    ┌─────────┐                     │    │
│  │         │ChromaDB │    │  Neo4j  │                     │    │
│  │         │(Vector) │    │ (Graph) │                     │    │
│  │         └─────────┘    └─────────┘                     │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                  │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │  Recent Queries                                          │    │
│  │  ─────────────────────────────────────────────────────  │    │
│  │  • C4A15 에러 해결법         │ verified  │ 3.2s │ 2min  │    │
│  │  • Control Box 에러 목록     │ partial   │ 4.1s │ 5min  │    │
│  │  • Joint 3 통신 문제         │ verified  │ 2.8s │ 12min │    │
│  └─────────────────────────────────────────────────────────┘    │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

**컴포넌트:**
- 시스템 상태 카드 (VectorDB, GraphDB, LLM 연결 상태)
- 핵심 KPI 메트릭 (쿼리 수, 평균 지연시간, 검증률)
- 아키텍처 다이어그램 (인터랙티브)
- 최근 쿼리 히스토리 테이블

---

### 2.2 💬 RAG Query (대화형 인터페이스)

**목적:** 사용자가 직접 RAG 시스템과 대화

```
┌─────────────────────────────────────────────────────────────────┐
│  💬 RAG Query Interface                                          │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  ┌─ Settings ─────────────────────────────────────────────────┐ │
│  │  Search Strategy: [Hybrid ▼]  Top-K: [5]  Show Sources: [✓]│ │
│  │  Include Citation: [✓]        Compare Mode: [○ Off  ● On ] │ │
│  └────────────────────────────────────────────────────────────┘ │
│                                                                  │
│  ┌─ Chat ─────────────────────────────────────────────────────┐ │
│  │                                                             │ │
│  │  👤 User:                                                   │ │
│  │  C4A15 에러가 발생했습니다. 해결 방법을 알려주세요.          │ │
│  │                                                             │ │
│  │  ─────────────────────────────────────────────────────────  │ │
│  │                                                             │ │
│  │  🤖 Assistant:                                              │ │
│  │  C4A15 에러는 "Communication with joint 3 lost"입니다.      │ │
│  │                                                             │ │
│  │  **해결 방법:**                                              │ │
│  │  1. 완전 재부팅 수행                                         │ │
│  │  2. 케이블 연결 확인                                         │ │
│  │                                                             │ │
│  │  ---                                                        │ │
│  │  **출처:** C4A15                                            │ │
│  │  🟢 신뢰도: 85%                                             │ │
│  │                                                             │ │
│  │  ┌─ Query Analysis ───────────────────────────────────────┐ │ │
│  │  │ Error Codes: [C4A15]  Components: []                   │ │ │
│  │  │ Strategy: graph_first  Type: error_resolution          │ │ │
│  │  └────────────────────────────────────────────────────────┘ │ │
│  │                                                             │ │
│  │  ┌─ Sources ──────────────────────────────────────────────┐ │ │
│  │  │ 1. C4A15 (graph) - Score: 1.0                          │ │ │
│  │  │ 2. error_codes_C4_001 (vector) - Score: 0.75           │ │ │
│  │  └────────────────────────────────────────────────────────┘ │ │
│  │                                                             │ │
│  └─────────────────────────────────────────────────────────────┘ │
│                                                                  │
│  ┌─────────────────────────────────────────────────────────────┐ │
│  │  [질문을 입력하세요...]                            [Send]   │ │
│  └─────────────────────────────────────────────────────────────┘ │
│                                                                  │
│  ┌─ Metrics ───────────────────────────────────────────────────┐ │
│  │  Latency: 3.2s │ Tokens: 1,245 │ Cost: $0.002 │ Status: ✅  │ │
│  └─────────────────────────────────────────────────────────────┘ │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

**기능:**
- 채팅 인터페이스 (대화 히스토리 유지)
- 검색 전략 선택 (graph_first, vector_first, hybrid)
- 실시간 메트릭 표시 (지연시간, 토큰, 비용)
- 출처 및 쿼리 분석 결과 표시
- **비교 모드**: 다른 전략으로 동시에 질의하여 결과 비교

---

### 2.3 🔍 Search Explorer (검색 탐색)

**목적:** 검색 결과 심층 분석 및 비교

```
┌─────────────────────────────────────────────────────────────────┐
│  🔍 Search Explorer                                              │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  ┌─ Search Input ─────────────────────────────────────────────┐ │
│  │  Query: [Joint 3 communication error          ]  [Search]   │ │
│  │  Top-K: [10]  Strategy: [All ▼]  Compare: [✓]              │ │
│  └────────────────────────────────────────────────────────────┘ │
│                                                                  │
│  ┌─ Strategy Comparison ──────────────────────────────────────┐ │
│  │                                                             │ │
│  │  ┌─ Graph First ──────┐  ┌─ Vector First ─────┐            │ │
│  │  │ Results: 5         │  │ Results: 8          │            │ │
│  │  │ Latency: 0.8s      │  │ Latency: 0.6s       │            │ │
│  │  │ Avg Score: 0.92    │  │ Avg Score: 0.68     │            │ │
│  │  │                    │  │                     │            │ │
│  │  │ 1. C4A15 (1.0)     │  │ 1. chunk_C4 (0.82) │            │ │
│  │  │ 2. C4A14 (0.95)    │  │ 2. chunk_C3 (0.75) │            │ │
│  │  │ 3. C4A16 (0.90)    │  │ 3. chunk_C5 (0.71) │            │ │
│  │  └────────────────────┘  └─────────────────────┘            │ │
│  │                                                             │ │
│  │  ┌─ Hybrid ───────────────────────────────────────────────┐ │ │
│  │  │ Results: 10 (merged)  │  Latency: 1.2s  │  Best Score   │ │ │
│  │  └────────────────────────────────────────────────────────┘ │ │
│  │                                                             │ │
│  └─────────────────────────────────────────────────────────────┘ │
│                                                                  │
│  ┌─ Result Details ───────────────────────────────────────────┐ │
│  │                                                             │ │
│  │  #1: C4A15 (GraphDB)                           Score: 1.0  │ │
│  │  ─────────────────────────────────────────────────────────  │ │
│  │  에러 코드: C4A15                                           │ │
│  │  설명: Communication with joint 3 lost                      │ │
│  │  해결 방법: Conduct a complete rebooting sequence           │ │
│  │                                                             │ │
│  │  Metadata:                                                  │ │
│  │  • entity_type: ErrorCode                                   │ │
│  │  • caused_by: Joint 3                                       │ │
│  │  • relation_type: RESOLVED_BY                               │ │
│  │                                                             │ │
│  │  ─────────────────────────────────────────────────────────  │ │
│  │  #2: error_codes_C4_001 (VectorDB)             Score: 0.82 │ │
│  │  ...                                                        │ │
│  └─────────────────────────────────────────────────────────────┘ │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

**기능:**
- 세 가지 검색 전략 동시 비교
- 결과 점수, 지연시간 비교 차트
- 상세 결과 및 메타데이터 표시
- 검색 결과 Export (JSON, CSV)

---

### 2.4 🕸️ Knowledge Graph (지식그래프 시각화)

**목적:** Neo4j 온톨로지 구조 및 관계 시각화

```
┌─────────────────────────────────────────────────────────────────┐
│  🕸️ Knowledge Graph Visualization                                │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  ┌─ Controls ─────────────────────────────────────────────────┐ │
│  │  Node Type: [All ▼]  Relationship: [All ▼]  Depth: [2]     │ │
│  │  Search: [C4A15                    ] [Find]                 │ │
│  └────────────────────────────────────────────────────────────┘ │
│                                                                  │
│  ┌─ Graph Visualization ──────────────────────────────────────┐ │
│  │                                                             │ │
│  │                    ┌───────────┐                            │ │
│  │                    │ Joint 3   │                            │ │
│  │                    │ (Component)│                           │ │
│  │                    └─────┬─────┘                            │ │
│  │                   CAUSED_BY                                 │ │
│  │                          │                                  │ │
│  │    ┌─────────────────────┼─────────────────────┐           │ │
│  │    │                     │                     │           │ │
│  │    ▼                     ▼                     ▼           │ │
│  │ ┌──────┐            ┌──────┐            ┌──────┐          │ │
│  │ │C4A14 │◄──RELATED──│C4A15 │──RELATED──►│C4A16 │          │ │
│  │ │Error │            │Error │            │Error │          │ │
│  │ └──────┘            └──┬───┘            └──────┘          │ │
│  │                   RESOLVED_BY                              │ │
│  │                        │                                   │ │
│  │                        ▼                                   │ │
│  │                 ┌────────────┐                             │ │
│  │                 │  Reboot    │                             │ │
│  │                 │ (Solution) │                             │ │
│  │                 └────────────┘                             │ │
│  │                                                             │ │
│  └─────────────────────────────────────────────────────────────┘ │
│                                                                  │
│  ┌─ Node Details ─────────────────────────────────────────────┐ │
│  │  Selected: C4A15 (ErrorCode)                                │ │
│  │  ───────────────────────────────────────────────────────── │ │
│  │  Properties:                                                │ │
│  │  • code: C4A15                                              │ │
│  │  • title: Communication with joint 3 lost                   │ │
│  │  • severity: warning                                        │ │
│  │                                                             │ │
│  │  Relationships:                                             │ │
│  │  • CAUSED_BY → Joint 3                                      │ │
│  │  • RESOLVED_BY → Reboot                                     │ │
│  │  • RELATED_TO → C4A14, C4A16                               │ │
│  └─────────────────────────────────────────────────────────────┘ │
│                                                                  │
│  ┌─ Statistics ───────────────────────────────────────────────┐ │
│  │  Nodes: 245  │  Relationships: 892  │  Error Codes: 56     │ │
│  │  Components: 22  │  Solutions: 150  │  Symptoms: 89        │ │
│  └─────────────────────────────────────────────────────────────┘ │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

**기능:**
- **인터랙티브 그래프**: 노드 클릭/드래그, 줌/팬
- **필터링**: 노드 유형, 관계 유형별 필터
- **검색**: 특정 에러 코드/부품 중심 서브그래프
- **통계**: 온톨로지 구조 통계

---

### 2.5 📈 Performance (성능 평가)

**목적:** RAG 시스템 성능 측정 및 Phase별 비교

```
┌─────────────────────────────────────────────────────────────────┐
│  📈 Performance Evaluation                                       │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  ┌─ Score Cards ──────────────────────────────────────────────┐ │
│  │                                                             │ │
│  │  ┌────────────────┐  ┌────────────────┐  ┌────────────────┐│ │
│  │  │  Accuracy      │  │  Recall        │  │  F1 Score      ││ │
│  │  │    82.5%       │  │    78.3%       │  │    80.3%       ││ │
│  │  │  ▲ +5.2%       │  │  ▲ +3.1%       │  │  ▲ +4.1%       ││ │
│  │  └────────────────┘  └────────────────┘  └────────────────┘│ │
│  │                                                             │ │
│  │  ┌────────────────┐  ┌────────────────┐  ┌────────────────┐│ │
│  │  │  Hallucination │  │  Avg Latency   │  │  Cost/Query    ││ │
│  │  │  Prevention    │  │                │  │                ││ │
│  │  │    95.2%       │  │    3.4s        │  │    $0.002      ││ │
│  │  │  ▲ +12.0%      │  │  ▼ -0.8s       │  │  ▼ -15%        ││ │
│  │  └────────────────┘  └────────────────┘  └────────────────┘│ │
│  │                                                             │ │
│  └─────────────────────────────────────────────────────────────┘ │
│                                                                  │
│  ┌─ Phase Comparison ─────────────────────────────────────────┐ │
│  │                                                             │ │
│  │  Metric          │ Phase 5 │ Phase 6 │ Phase 7 │ Phase 8   │ │
│  │  ─────────────────────────────────────────────────────────  │ │
│  │  Accuracy        │  65%    │  75%    │  82%    │  82.5%    │ │
│  │  Hallucination   │  0%     │  45%    │  95%    │  95.2%    │ │
│  │  Avg Latency     │  5.2s   │  4.5s   │  4.2s   │  3.4s     │ │
│  │  Graph Usage     │  0%     │  60%    │  65%    │  68%      │ │
│  │  Verification    │  None   │  None   │  ✓      │  ✓        │ │
│  │                                                             │ │
│  │  [Chart: Line graph showing improvement across phases]      │ │
│  │                                                             │ │
│  └─────────────────────────────────────────────────────────────┘ │
│                                                                  │
│  ┌─ Benchmark Tests ──────────────────────────────────────────┐ │
│  │                                                             │ │
│  │  Test Case                    │ Expected │ Actual │ Status │ │
│  │  ─────────────────────────────────────────────────────────  │ │
│  │  C4A15 에러 해결법            │ VERIFIED │ PARTIAL│   ⚠️   │ │
│  │  C999 에러 (존재하지 않음)    │ INSUFF.  │ INSUFF.│   ✅   │ │
│  │  Control Box 에러 목록        │ VERIFIED │ VERIFIED│  ✅   │ │
│  │  로봇이 갑자기 멈췄어요       │ PARTIAL  │ VERIFIED│  ✅   │ │
│  │  Joint 3 통신 문제            │ VERIFIED │ VERIFIED│  ✅   │ │
│  │                                                             │ │
│  │  Overall: 4/5 passed (80%)                    [Run Tests]   │ │
│  │                                                             │ │
│  └─────────────────────────────────────────────────────────────┘ │
│                                                                  │
│  ┌─ Strategy Performance ─────────────────────────────────────┐ │
│  │                                                             │ │
│  │  [Bar Chart: Accuracy by Strategy]                          │ │
│  │                                                             │ │
│  │  graph_first  ████████████████████░░░░  85%                │ │
│  │  vector_first ██████████████░░░░░░░░░░  62%                │ │
│  │  hybrid       █████████████████████░░░  88%                │ │
│  │                                                             │ │
│  └─────────────────────────────────────────────────────────────┘ │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

**기능:**
- **스코어 카드**: 핵심 지표 (정확도, 재현율, F1, Hallucination 방지율)
- **Phase 비교 테이블**: Phase 5 → 8 성능 변화
- **벤치마크 테스트**: 사전 정의된 테스트 케이스 실행
- **전략별 성능**: graph_first vs vector_first vs hybrid 비교
- **트렌드 차트**: 시간에 따른 성능 변화

---

### 2.6 🔧 LLMOps Monitor (운영 모니터링)

**목적:** LLM 사용량, 비용, 지연시간 실시간 모니터링

```
┌─────────────────────────────────────────────────────────────────┐
│  🔧 LLMOps Monitoring Dashboard                                  │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  ┌─ Real-time Metrics ────────────────────────────────────────┐ │
│  │                                                             │ │
│  │  ┌────────────────┐  ┌────────────────┐  ┌────────────────┐│ │
│  │  │ Active Queries │  │ Queue Length   │  │ Error Rate     ││ │
│  │  │      3         │  │      0         │  │     0.2%       ││ │
│  │  └────────────────┘  └────────────────┘  └────────────────┘│ │
│  │                                                             │ │
│  └─────────────────────────────────────────────────────────────┘ │
│                                                                  │
│  ┌─ Token Usage (Today) ──────────────────────────────────────┐ │
│  │                                                             │ │
│  │  Model: GPT-4o-mini                                         │ │
│  │                                                             │ │
│  │  Input Tokens:   32,450  ████████████░░░░░░░░  65%          │ │
│  │  Output Tokens:  12,780  █████░░░░░░░░░░░░░░░  26%          │ │
│  │  Total:          45,230                                     │ │
│  │                                                             │ │
│  │  [Line Chart: Token usage over time (24h)]                  │ │
│  │                                                             │ │
│  └─────────────────────────────────────────────────────────────┘ │
│                                                                  │
│  ┌─ Cost Tracking ────────────────────────────────────────────┐ │
│  │                                                             │ │
│  │  Period        │ Queries │ Tokens  │ Cost    │ Avg/Query   │ │
│  │  ─────────────────────────────────────────────────────────  │ │
│  │  Today         │    127  │  45.2K  │  $0.12  │  $0.001     │ │
│  │  This Week     │    892  │ 312.5K  │  $0.83  │  $0.001     │ │
│  │  This Month    │  3,456  │   1.2M  │  $3.21  │  $0.001     │ │
│  │                                                             │ │
│  │  Budget: $10.00/month                                       │ │
│  │  [████████░░░░░░░░░░░░]  32% used                          │ │
│  │                                                             │ │
│  └─────────────────────────────────────────────────────────────┘ │
│                                                                  │
│  ┌─ Latency Distribution ─────────────────────────────────────┐ │
│  │                                                             │ │
│  │  [Histogram: Response time distribution]                    │ │
│  │                                                             │ │
│  │  < 1s   ██░░░░░░░░░░░░░░░░░░░░  8%                         │ │
│  │  1-2s   ████████░░░░░░░░░░░░░░  35%                        │ │
│  │  2-3s   ██████████████░░░░░░░░  42%                        │ │
│  │  3-5s   ██████░░░░░░░░░░░░░░░░  12%                        │ │
│  │  > 5s   ██░░░░░░░░░░░░░░░░░░░░  3%                         │ │
│  │                                                             │ │
│  │  P50: 2.1s  │  P95: 4.2s  │  P99: 5.8s                     │ │
│  │                                                             │ │
│  └─────────────────────────────────────────────────────────────┘ │
│                                                                  │
│  ┌─ Pipeline Breakdown ───────────────────────────────────────┐ │
│  │                                                             │ │
│  │  Component        │ Avg Time │ % of Total                   │ │
│  │  ─────────────────────────────────────────────────────────  │ │
│  │  Query Analysis   │   0.05s  │ ██░░░░░░░░░░░░░░░░░░  2%    │ │
│  │  Graph Retrieval  │   0.82s  │ ███████░░░░░░░░░░░░░  24%   │ │
│  │  Vector Retrieval │   0.45s  │ ████░░░░░░░░░░░░░░░░  13%   │ │
│  │  LLM Generation   │   1.95s  │ ████████████████░░░░  58%   │ │
│  │  Verification     │   0.12s  │ █░░░░░░░░░░░░░░░░░░░  3%    │ │
│  │                                                             │ │
│  └─────────────────────────────────────────────────────────────┘ │
│                                                                  │
│  ┌─ Error Log ────────────────────────────────────────────────┐ │
│  │                                                             │ │
│  │  [2026-01-21 14:32:15] WARN  Neo4j connection timeout       │ │
│  │  [2026-01-21 14:28:03] ERROR OpenAI rate limit exceeded     │ │
│  │  [2026-01-21 14:15:22] INFO  Service recovered              │ │
│  │                                                             │ │
│  └─────────────────────────────────────────────────────────────┘ │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

**기능:**
- **실시간 메트릭**: 활성 쿼리, 대기열, 에러율
- **토큰 사용량**: 일별/주별/월별 토큰 사용 추적
- **비용 추적**: 실시간 비용 계산, 예산 관리
- **지연시간 분포**: 히스토그램, 퍼센타일
- **파이프라인 분석**: 각 단계별 소요 시간
- **에러 로그**: 실시간 에러/경고 로그

---

## 3. 데이터 파이프라인 시각화

### 3.1 이기종 데이터 흐름

```
┌─────────────────────────────────────────────────────────────────┐
│  🔄 Data Pipeline Architecture                                   │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  ┌─ Data Sources ────────────────────────────────────────────┐  │
│  │                                                            │  │
│  │  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐  │  │
│  │  │📄 PDF    │  │📊 CSV    │  │🔧 API    │  │💾 DB     │  │  │
│  │  │Documents │  │Logs      │  │Endpoints │  │Records   │  │  │
│  │  └────┬─────┘  └────┬─────┘  └────┬─────┘  └────┬─────┘  │  │
│  │       │             │             │             │         │  │
│  └───────┼─────────────┼─────────────┼─────────────┼─────────┘  │
│          │             │             │             │            │
│          ▼             ▼             ▼             ▼            │
│  ┌─ Processing Layer ────────────────────────────────────────┐  │
│  │                                                            │  │
│  │  ┌──────────────────────────────────────────────────────┐ │  │
│  │  │              Data Extraction & Transform              │ │  │
│  │  │  • PDF → Text (PyMuPDF)                              │ │  │
│  │  │  • Chunking (semantic)                               │ │  │
│  │  │  • Entity Extraction                                 │ │  │
│  │  └──────────────────────────────────────────────────────┘ │  │
│  │                          │                                 │  │
│  └──────────────────────────┼─────────────────────────────────┘  │
│                             │                                    │
│          ┌──────────────────┼──────────────────┐                │
│          ▼                  ▼                  ▼                │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐          │
│  │   ChromaDB   │  │    Neo4j    │  │   OpenAI    │          │
│  │   (Vector)   │  │   (Graph)   │  │  (Embedding) │          │
│  │              │  │              │  │              │          │
│  │  • Embeddings│  │  • Nodes    │  │  • text-    │          │
│  │  • Chunks    │  │  • Relations │  │    embedding │          │
│  │  • Metadata  │  │  • Properties│  │    -3-small │          │
│  └──────────────┘  └──────────────┘  └──────────────┘          │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

### 3.2 Multi-Agent 파이프라인

```
┌─────────────────────────────────────────────────────────────────┐
│  🤖 Multi-Agent RAG Pipeline                                     │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│     User Query                                                   │
│         │                                                        │
│         ▼                                                        │
│  ┌─────────────────┐                                            │
│  │  Query Analyzer │  ← Agent 1: 질문 분석                      │
│  │  • Error code   │     - 에러 코드 추출                        │
│  │  • Component    │     - 부품명 감지                           │
│  │  • Query type   │     - 검색 전략 결정                        │
│  └────────┬────────┘                                            │
│           │                                                      │
│           ▼                                                      │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │                     Retriever Agent                      │    │
│  │                                                          │    │
│  │   ┌───────────────┐          ┌───────────────┐          │    │
│  │   │ Graph         │          │ Vector        │          │    │
│  │   │ Retriever     │          │ Retriever     │          │    │
│  │   │ (Neo4j)       │          │ (ChromaDB)    │          │    │
│  │   └───────┬───────┘          └───────┬───────┘          │    │
│  │           │                          │                   │    │
│  │           └──────────┬───────────────┘                   │    │
│  │                      │                                   │    │
│  │           ┌──────────▼───────────┐                      │    │
│  │           │  Hybrid Merger       │                      │    │
│  │           │  • Score fusion      │                      │    │
│  │           │  • Deduplication     │                      │    │
│  │           └──────────────────────┘                      │    │
│  │                                                          │    │
│  └────────────────────────┬────────────────────────────────┘    │
│                           │                                      │
│                           ▼                                      │
│  ┌─────────────────────────────────────────────────────────┐    │
│  │                     Verifier Agent                       │    │
│  │                                                          │    │
│  │  Pre-Generation:              Post-Generation:           │    │
│  │  • Context validation         • Hallucination check      │    │
│  │  • Error code validation      • Source matching          │    │
│  │  • Sufficiency check          • Citation generation      │    │
│  │                                                          │    │
│  └────────────────────────┬────────────────────────────────┘    │
│                           │                                      │
│                           ▼                                      │
│  ┌─────────────────┐                                            │
│  │    Generator    │  ← Agent 4: 답변 생성                      │
│  │  (GPT-4o-mini)  │     - Prompt building                      │
│  │                 │     - LLM generation                       │
│  └────────┬────────┘                                            │
│           │                                                      │
│           ▼                                                      │
│     Verified Answer                                              │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

---

## 4. 기술 스택

### 4.1 프론트엔드

| 기술 | 용도 |
|------|------|
| **Streamlit** | 메인 대시보드 프레임워크 |
| **Plotly** | 인터랙티브 차트 |
| **Pyvis/NetworkX** | 그래프 시각화 |
| **Streamlit-Aggrid** | 데이터 테이블 |

### 4.2 백엔드 연동

| 기술 | 용도 |
|------|------|
| **Requests** | API 호출 (Phase 8) |
| **Neo4j Python Driver** | 직접 그래프 쿼리 |
| **SQLite** | 메트릭/로그 저장 |

---

## 5. 파일 구조 (계획)

```
src/dashboard/
├── __init__.py
├── app.py                    # Streamlit 메인 앱
├── pages/                    # 멀티페이지
│   ├── 1_📊_Overview.py
│   ├── 2_💬_RAG_Query.py
│   ├── 3_🔍_Search_Explorer.py
│   ├── 4_🕸️_Knowledge_Graph.py
│   ├── 5_📈_Performance.py
│   └── 6_🔧_LLMOps_Monitor.py
├── components/               # 재사용 컴포넌트
│   ├── __init__.py
│   ├── metrics.py           # 메트릭 카드
│   ├── charts.py            # 차트 컴포넌트
│   ├── graph_viz.py         # 그래프 시각화
│   └── query_panel.py       # 쿼리 패널
├── services/                 # 서비스 레이어
│   ├── __init__.py
│   ├── api_client.py        # API 호출
│   ├── metrics_service.py   # 메트릭 수집/저장
│   └── graph_service.py     # Neo4j 직접 쿼리
├── utils/                    # 유틸리티
│   ├── __init__.py
│   ├── config.py            # 설정
│   └── formatters.py        # 포맷터
└── data/                     # 로컬 데이터
    ├── metrics.db           # SQLite 메트릭 DB
    └── benchmarks.json      # 벤치마크 정의

scripts/
└── run_dashboard.py         # 대시보드 실행 스크립트
```

---

## 6. JD 어필 포인트 매핑

| JD 항목 | 대시보드 기능 | 시연 포인트 |
|--------|-------------|------------|
| **지식그래프·온톨로지 설계** | Knowledge Graph 페이지 | 에러코드-부품-해결책 관계 시각화 |
| **Multi-Agent 구성** | Overview + Pipeline 다이어그램 | Analyzer→Retriever→Verifier 흐름 |
| **이기종 데이터 파이프라인** | Data Pipeline 시각화 | PDF→Chunking→Embedding 흐름 |
| **RAG·Workflow 설계** | RAG Query + Search Explorer | 검색 전략 비교, 하이브리드 검색 |
| **LLM UI/웹 인터페이스** | 전체 대시보드 | Streamlit 기반 대화형 UI |
| **Hallucination·Latency·Cost 최적화** | Performance + LLMOps | 검증률/지연시간/비용 실시간 모니터링 |
| **LLMOps 운영** | LLMOps Monitor | 토큰/비용/에러 추적 대시보드 |

---

## 7. 구현 순서

### Step 1: 기본 구조 (Day 1)
1. Streamlit 멀티페이지 앱 설정
2. 사이드바 네비게이션
3. 공통 컴포넌트 (메트릭 카드, 헤더)

### Step 2: Overview 페이지 (Day 1)
1. 시스템 상태 카드
2. 아키텍처 다이어그램
3. 최근 쿼리 히스토리

### Step 3: RAG Query 페이지 (Day 2)
1. 채팅 인터페이스
2. 설정 패널 (전략, top_k)
3. 결과 표시 (답변, 출처, 분석)

### Step 4: Search Explorer (Day 2)
1. 검색 입력
2. 전략별 비교 뷰
3. 상세 결과 패널

### Step 5: Knowledge Graph (Day 3)
1. Pyvis 그래프 시각화
2. 노드 필터/검색
3. 노드 상세 정보

### Step 6: Performance (Day 3)
1. 스코어 카드
2. Phase 비교 테이블
3. 벤치마크 테스트 러너

### Step 7: LLMOps Monitor (Day 4)
1. 토큰/비용 추적
2. 지연시간 분포
3. 에러 로그

### Step 8: 통합 테스트 (Day 4)
1. 전체 기능 테스트
2. 반응형 레이아웃 확인
3. 최종 스타일링

---

## 8. 체크리스트

- [ ] Streamlit 멀티페이지 앱 구조
- [ ] Overview 페이지
  - [ ] 시스템 상태 카드
  - [ ] 아키텍처 다이어그램
  - [ ] 최근 쿼리 히스토리
- [ ] RAG Query 페이지
  - [ ] 채팅 인터페이스
  - [ ] 설정 패널
  - [ ] 비교 모드
- [ ] Search Explorer 페이지
  - [ ] 전략별 비교
  - [ ] 상세 결과 뷰
- [ ] Knowledge Graph 페이지
  - [ ] 인터랙티브 그래프
  - [ ] 노드 필터/검색
- [ ] Performance 페이지
  - [ ] 스코어 카드
  - [ ] Phase 비교
  - [ ] 벤치마크 테스트
- [ ] LLMOps Monitor 페이지
  - [ ] 토큰/비용 추적
  - [ ] 지연시간 분포
  - [ ] 에러 로그

---

## 9. 의존성

```
# requirements.txt 추가
streamlit>=1.28.0
plotly>=5.18.0
pyvis>=0.3.2
networkx>=3.0
streamlit-aggrid>=0.3.4
```

---

## 10. Phase 10 Preview

Phase 9 완료 후, Phase 10에서는:

```
Phase 10: 테스트 & 평가 시스템
├── 자동화된 벤치마크 테스트
├── 정확도/재현율 측정
├── A/B 테스트 프레임워크
└── 프로젝트 최종 문서화
```
